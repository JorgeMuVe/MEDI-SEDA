(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{28:function(e,t,a){e.exports=a(41)},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(22),i=a.n(r),c=a(1),l=a(2),s=a(4),d=a(3),u=a(5),m=a(25),p=a(12),g=a(23),b=a.n(g),E=function(e){return"0"===e.toString()?"Operador":"1"===e.toString()?"Administrador":"2"===e.toString()?"Gerente":"Sin grupo"},h=function(e){return["","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","IXX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX"][e]},f=function(e,t){var a=new Date;e&&(a=new Date(e)),t&&a.setDate(a.getDate()+t);var n=a.getFullYear(),o=a.getMonth()+1,r=a.getDate(),i=n+"-";return o<10?i=i+"0"+o:i+=o,i+="-",r<10?i=i+"0"+r:i+=r,i},v=function(e,t){var a=0,n=0,o=0,r="";switch(t){case"hh:mm:ss":a=Math.floor(e),n=Math.floor(60*(e-a)),o=Math.round(60*(60*(e-a)-n)),a<10&&(a="0"+a),n<10&&(n="0"+n),o<10&&(o="0"+o),r=a+":"+n+":"+o;break;case"hh:mm":a=Math.floor(e),n=Math.round(60*(e-a)),a<10&&(a="0"+a),n<10&&(n="0"+n),r=a+":"+n}return r},A=function(e){return 1===e?"Baja":2===e?"Media":3===e?"Alta":"SNES"},x=function(e){return"Baja"===e?1:"Media"===e?2:"Alta"===e?3:0},S=function(e){return null===e?"Sin Programar":1===e?"Inscrito":2===e?"Finalizado":void 0},y=[{numero:1,letra:"01",nombre:"Enero"},{numero:2,letra:"02",nombre:"Febrero"},{numero:3,letra:"03",nombre:"Marzo"},{numero:4,letra:"04",nombre:"Abril"},{numero:5,letra:"05",nombre:"Mayo"},{numero:6,letra:"06",nombre:"Junio"},{numero:7,letra:"07",nombre:"Julio"},{numero:8,letra:"08",nombre:"Agosto"},{numero:9,letra:"09",nombre:"Setiembre"},{numero:10,letra:"10",nombre:"Octubre"},{numero:11,letra:"11",nombre:"Noviembre"},{numero:12,letra:"12",nombre:"Diciembre"}],C=["2019","2020","2021","2022","2023","2024","2025"],R=[{codigo:1,url:"/app",titulo:"MEDI - SEDA",grupo:0},{codigo:2,url:"/app/ingresar",titulo:"Iniciar Sesi\xf3n",grupo:0},{codigo:3,url:"/app/salir",titulo:"Cerrar Sesi\xf3n",grupo:0},{codigo:4,url:"/app/usuario",titulo:"Usuarios del Sistema",grupo:1},{codigo:5,url:"/app/perfil",titulo:"Perfil de Usuario",grupo:1},{codigo:6,url:"/app/cambiocontra",titulo:"Cambio de Contrase\xf1a",grupo:0},{codigo:7,url:"/app/zona",titulo:"Zonas Comerciales",grupo:1},{codigo:8,url:"/app/bloque",titulo:"Bloques Urbanos",grupo:1},{codigo:9,url:"/app/direccion",titulo:"Direcciones Registradas",grupo:1},{codigo:11,url:"/app/conexion",titulo:"Conexiones Activas",grupo:1},{codigo:12,url:"/app/conexion/prodagua",titulo:"Conexiones Por Zona (Pro. Agua)",grupo:1},{codigo:13,url:"/app/actividad",titulo:"Menu de Actividad/Reporte",grupo:1},{codigo:14,url:"/app/actividad/administrador/presion",titulo:"Actividades de Presi\xf3n",grupo:1},{codigo:15,url:"/app/actividad/administrador/continuidad",titulo:"Actividades de Continuidad",grupo:1},{codigo:16,url:"/app/actividad/operario",titulo:"Actividad de Operario",grupo:0},{codigo:17,url:"/app/aguafuente",titulo:"Fuentes de Agua",grupo:1},{codigo:18,url:"/app/zonafuente",titulo:"Fuentes de Agua y Zonas Comerciales",grupo:1},{codigo:19,url:"/app/reporte/presion",titulo:"Reporte de Presi\xf3n",grupo:1},{codigo:20,url:"/app/reporte/continuidad",titulo:"Reporte de Continuidad",grupo:1}],P=function(){return window.screen.width<640},O=function(e){var t=new Date(f()),a=new Date,n=!1;return e&&(a=new Date(e)),a<t&&(n=!0),n},N=function(e,t,a){(function(e,t,a){var n={html:e,orientacion:t,nombreArchivo:a};return new Promise((function(e,t){fetch(M+"/reporte/pdf/",{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-type":"application/json"})}).then((function(t){e(t.blob())})).catch((function(e){t(e)}))}))})(e,t,a).then((function(e){var t=new Blob([e],{type:"application/pdf"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=a,document.body.appendChild(n),n.click()}))};var M="http://18.191.29.185:5000",k=M+"/api/usuario/";function I(){var e=localStorage.getItem("tokenUsuario");if(""!==e&&null!==e&&"undefined"!==e&&void 0!==e){var t=b()(e);return{codigoUsuario:t.codigoUsuario,cuentaUsuario:t.cuentaUsuario,nombres:t.nombres,apellidosPaterno:t.apellidosPaterno,apellidosMaterno:t.apellidosMaterno,grupo:t.grupo,firmaDigital:t.firmaDigital,firmaSesion:t.firmaSesion}}return!1}var D=M+"/version/";var j={codigoUsuario:"",cuentaUsuario:"",nombres:"",apellidosPaterno:"",apellidosMaterno:"",firmaDigital:"",grupo:-1,mostrarModal:!1},Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).accesosDirectos=function(){var e=o.a.createElement("div",null,"MEDI SEDA");switch(a.state.grupo){case 0:e=o.a.createElement("div",null,o.a.createElement("a",{href:"/actividad/operario"},"Acitividades de Presi\xf3n"));break;case 1:e=o.a.createElement("div",null,o.a.createElement("a",{href:"/actividad/administrador/presion"},"Acitividades de Presi\xf3n"),o.a.createElement("a",{href:"/actividad/administrador/continuidad"},"Acitividades de Presi\xf3n"),o.a.createElement("a",{href:"/reporte/presion"},"Reporte de Presi\xf3n"),o.a.createElement("a",{href:"/reporte/continuidad"},"Reporte de Continuidad"));break;case 2:e=o.a.createElement("div",null,o.a.createElement("a",{href:"/reporte/presion"},"Reporte de Presi\xf3n"),o.a.createElement("a",{href:"/reporte/continuidad"},"Reporte de Continuidad"))}return e},a.controlModal=function(){a.setState({mostrarModal:!a.state.mostrarModal})},a.state=j,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=I();e?this.setState(e):this.setState(j)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado",style:{fontSize:"20px"}},o.a.createElement("b",null,"SISTEMA WEB MEDI SEDA V.0.1")),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},"Toma de valores de continuidad y presi\xf3n."),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},"La resoluci\xf3n de tu pantalla es: ",window.screen.width+"x"+window.screen.height)))}}]),t}(n.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"cuadro_mensaje peligro",style:{width:"50%"}},o.a.createElement("p",null," Usuario no Valido "),o.a.createElement("p",null," Esta acci\xf3n sera Reportada")))}}]),t}(n.Component),z={codigoUsuario:"",cuentaUsuario:"",nombres:"",apellidosPaterno:"",apellidosMaterno:"",firmaDigital:"",grupo:""},_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state=z,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=I();e?this.setState(e):this.props.history.push("/app")}},{key:"render",value:function(){return this.state.codigoUsuario?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"25%"}},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"tabla_fila"},o.a.createElement("td",null,o.a.createElement("b",null,"Nombres")),o.a.createElement("td",null,this.state.nombres)),o.a.createElement("tr",{className:"tabla_fila"},o.a.createElement("td",null,o.a.createElement("b",null,"Apellido Paterno")),o.a.createElement("td",null,this.state.apellidosPaterno)),o.a.createElement("tr",{className:"tabla_fila"},o.a.createElement("td",null,o.a.createElement("b",null,"Apellido Materno")),o.a.createElement("td",null,this.state.apellidosMaterno)),o.a.createElement("tr",{className:"tabla_fila"},o.a.createElement("td",null,o.a.createElement("b",null,"Grupo")),o.a.createElement("td",null,E(this.state.grupo))),o.a.createElement("tr",{className:"tabla_fila"},o.a.createElement("td",null,o.a.createElement("b",null,"Contrase\xf1a")),o.a.createElement("td",null,o.a.createElement("a",{href:"/app/cambiocontra"},"Actualizar"))))))):o.a.createElement(U,null)}}]),t}(n.Component),T=a(7);function w(e){return function(e){for(var t="0123456789abcdef",a="",n=0;n<4*e.length;n++)a+=t.charAt(e[n>>2]>>8*(3-n%4)+4&15)+t.charAt(e[n>>2]>>8*(3-n%4)&15);return a}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var a=Array(80),n=1732584193,o=-271733879,r=-1732584194,i=271733878,c=-1009589776,l=0;l<e.length;l+=16){for(var s=n,d=o,u=r,m=i,p=c,g=0;g<80;g++){a[g]=g<16?e[l+g]:B(a[g-3]^a[g-8]^a[g-14]^a[g-16],1);var b=V(V(B(n,5),F(g,o,r,i)),V(V(c,a[g]),q(g)));c=i,i=r,r=B(o,30),o=n,n=b}n=V(n,s),o=V(o,d),r=V(r,u),i=V(i,m),c=V(c,p)}return[n,o,r,i,c]}(function(e){for(var t=[],a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<24-a%32;return t}(e),8*e.length))}function F(e,t,a,n){return e<20?t&a|~t&n:e<40?t^a^n:e<60?t&a|t&n|a&n:t^a^n}function q(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function V(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function B(e,t){return e<<t|e>>>32-t}var H=function(e){var t=e.cantidadElementos,a=e.cambiarPagina,n=e.paginaActual;return o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"paginado_boton",onClick:function(){n>1&&a(n-1)},title:"P\xe1gina anterior"},"\u2190"),o.a.createElement("input",{style:{textAlign:"center",border:"none"},size:2,type:"number",value:n,min:"1",pattern:"[0-9]*",name:"pagina_",id:"pagina_",title:"N\xfamero de P\xe1gina : "+n,onChange:a}),o.a.createElement("button",{className:"paginado_boton",onClick:function(){15===t&&a(n+1)},title:"P\xe1gina siguiente"},"\u2192"))},L=function(e){var t=e.tipoCuadro,a=e.children;e.cerrarMensaje;return o.a.createElement("div",{className:"cuadro_mensaje ".concat(t),style:{}},o.a.createElement("div",{style:{marginTop:"auto"}},a))},J=function(e){var t=e.mostrarModal,a=e.controlModal,n=e.tituloModal,r=e.children;return t?o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal_ventana"},o.a.createElement("div",{className:"modal_encabezado"},o.a.createElement("div",null," ",n," "),o.a.createElement("div",{className:"boton_cerrar",onClick:a},"\xd7")),o.a.createElement("hr",null),r)):null},X={usuario:I(),usuarioSeleccion:{codigoUsuario:"",cuentaUsuario:"",contrasegnaUsuario:"****",nombres:"",apellidosPaterno:"",apellidosMaterno:"",firmaDigital:"",grupo:"1",habilitado:"1"},usuarios:[],sugerenciasUsuarios:[],mostrarModal:!1,mostrarContrasegna:!1,paginaActual:1,usuarioInicioPaginado:1,textoUsuarioBuscar:""},G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarUsuarios=function(){a.setState({usuarioInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e;(e={inicio:a.state.usuarioInicioPaginado,resultados:15},new Promise((function(t,a){fetch(k+"paginado",{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){e.error||a.setState({usuarios:e,sugerenciasUsuarios:e})}))}))},a.cambiarHabilitadoUsuario=function(e){e.codigoUsuario&&function(e){return new Promise((function(t,a){fetch(k+"habilitar/",{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}({usuario:e.codigoUsuario,habilitado:parseInt(e.habilitado)?0:1,quien:a.state.usuario.firmaDigital}).then((function(e){return a.listarUsuarios()}))},a.resetearContrasegna=function(){var e=9100*Math.random()+900|0,t=a.state.usuarioSeleccion;t.contrasegnaUsuario=e+"",a.setState({usuarioSeleccion:t,mostrarContrasegna:!a.state.mostrarContrasegna})},a.guardarUsuario=function(e){e.preventDefault();var t,n=a.state.usuarioSeleccion;n.quien=a.state.usuario.firmaDigital,n.contrasegnaUsuario&&(n.contrasegnaUsuario=w(n.contrasegnaUsuario)),""!==n.codigoUsuario&&null!==n.codigoUsuario?""!==n.contrasegnaUsuario&&null!==n.contrasegnaUsuario&&void 0!==n.contrasegnaUsuario?function(e){var t=k;return new Promise((function(a,n){fetch(t,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){n(e)}))}))}(n).then((function(){a.listarUsuarios(),a.controlModal()})):function(e){var t=k+"datos/";return new Promise((function(a,n){fetch(t,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){n(e)}))}))}(n).then((function(){a.listarUsuarios(),a.controlModal()})):(t=n,new Promise((function(e,a){fetch(k,{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(){a.listarUsuarios(),a.controlModal()}))},a.modificarUsuarioEstado=function(e){var t=a.state.usuarioSeleccion;"habilitado"===e.target.id?t[e.target.id]=!a.state.usuarioSeleccion.habilitado:t[e.target.id]=e.target.value,a.setState({usuarioSeleccion:t})},a.seleccionarUsuario=function(e){e&&a.setState({usuarioSeleccion:e,mostrarModal:!a.state.mostrarModal})},a.controlModal=function(){if(a.state.mostrarModal){a.setState({mostrarContrasegna:!1,usuarioSeleccion:{codigoUsuario:"",cuentaUsuario:"",contrasegnaUsuario:"",nombres:"",apellidosPaterno:"",apellidosMaterno:"",firmaDigital:"",grupo:"1",habilitado:"1"}})}a.setState({mostrarModal:!a.state.mostrarModal,mostrarContrasegna:!1})},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listarUsuarios()}))},a.cambiarTextoUsuarioBusqueda=function(e){var t=e.target.value,n=[];a.state.paginaActual;if(t.length>0){var o=new RegExp("".concat(t+" ","*"),"i");n=a.state.usuarios.sort().filter((function(e){return o.test(e.nombres+" "+e.apellidosPaterno+" "+e.apellidosMaterno+e.cuentaUsuario)}))}0===t.length&&(n=a.state.usuarios),a.setState((function(){return{sugerenciasUsuarios:n,textoUsuarioBuscar:t,paginaActual:1}}))},a.state=X,a.cambiarTextoUsuarioBusqueda=a.cambiarTextoUsuarioBusqueda.bind(Object(T.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario.grupo>0&&this.setState({usuarioInicioPaginado:15*(parseInt(this.state.paginaActual)-1)},(function(){e.listarUsuarios()}))}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("input",{className:"cuadro_dato",type:"text",placeholder:"Busqueda de Operarios",value:this.state.textoUsuarioBuscar,onChange:this.cambiarTextoUsuarioBusqueda})),o.a.createElement("br",null),o.a.createElement(H,{cantidadElementos:this.state.sugerenciasUsuarios.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"60%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar un Nuevo Usuario",title:"Registrar/Agregar un Nuevo Usuario",onClick:function(){return e.controlModal()}})),o.a.createElement("th",null,"Celular"),o.a.createElement("th",null,"Nombres"),o.a.createElement("th",null,"Apellidos"),o.a.createElement("th",null,"Grupo"))),o.a.createElement("tbody",null,this.state.sugerenciasUsuarios.map((function(t){return o.a.createElement("tr",{key:t.codigoUsuario,className:"tabla_fila"},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("label",{className:"boton_habilitado"},o.a.createElement("input",{type:"checkbox",onChange:function(){return e.cambiarHabilitadoUsuario(t)},checked:1===parseInt(t.habilitado),value:1===parseInt(t.habilitado)?1:0,name:t.codigoUsuario,id:"chkBox"+t.codigoUsuario}),o.a.createElement("div",{className:"boton_deslizar redondo"}))),o.a.createElement("td",{onClick:function(){return e.seleccionarUsuario(t)}},t.cuentaUsuario.toUpperCase()),o.a.createElement("td",{onClick:function(){return e.seleccionarUsuario(t)}},t.nombres.toUpperCase()),o.a.createElement("td",{onClick:function(){return e.seleccionarUsuario(t)}},(t.apellidosPaterno+" "+(t.apellidosMaterno||"")).toUpperCase()),o.a.createElement("td",{style:{textAlign:"center"},onClick:function(){return e.seleccionarUsuario(t)}},E(t.grupo)))}))))),o.a.createElement("div",{className:"centrado"},this.state.sugerenciasUsuarios.length>0?null:o.a.createElement("div",{style:{width:"60%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarModal,controlModal:this.controlModal,tituloModal:"Datos de Usuario"},o.a.createElement("form",{noValidate:!0,onSubmit:this.guardarUsuario,className:"una_columna"},o.a.createElement("label",null," Numero Cuenta "),o.a.createElement("input",{id:"cuentaUsuario",className:"cuadro_dato",maxLength:"9",value:this.state.usuarioSeleccion.cuentaUsuario||"",onChange:this.modificarUsuarioEstado}),o.a.createElement("label",null," Nombres "),o.a.createElement("input",{id:"nombres",className:"cuadro_dato",value:this.state.usuarioSeleccion.nombres||"",onChange:this.modificarUsuarioEstado}),o.a.createElement("label",null," Apellido Paterno "),o.a.createElement("input",{id:"apellidosPaterno",className:"cuadro_dato",value:this.state.usuarioSeleccion.apellidosPaterno||"",onChange:this.modificarUsuarioEstado}),o.a.createElement("label",null," Apellido Materno "),o.a.createElement("input",{id:"apellidosMaterno",className:"cuadro_dato",value:this.state.usuarioSeleccion.apellidosMaterno||"",onChange:this.modificarUsuarioEstado}),o.a.createElement("label",null," Grupo "),o.a.createElement("select",{id:"grupo",className:"cuadro_dato",defaultValue:this.state.usuarioSeleccion.grupo,onChange:this.modificarUsuarioEstado},o.a.createElement("option",{value:"0"},"Operario"),o.a.createElement("option",{value:"1"},"Administrador"),o.a.createElement("option",{value:"2"},"Gerente")),o.a.createElement("div",{className:""},o.a.createElement("input",{type:"checkbox",id:"habilitado",className:"",checked:this.state.usuarioSeleccion.habilitado||0,onChange:this.modificarUsuarioEstado}),o.a.createElement("label",null,this.state.usuarioSeleccion.habilitado?"Habilitado":"Deshabilitado")),o.a.createElement("div",{style:{cursor:"pointer"},className:"cuadro_mensaje peligro",onClick:function(){return e.resetearContrasegna()}},"Generar Nueva Contrase\xf1a"),o.a.createElement("input",{hidden:!this.state.mostrarContrasegna,disabled:!0,className:"cuadro_dato",value:this.state.usuarioSeleccion.contrasegnaUsuario||"*****"}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Guardar"))))):o.a.createElement(U,null)}}]),t}(n.Component),W=a(11),Y=M+"/api/sesion/";var K={cuentaUsuario:"",contrasegna:"",mensajeTexto:""},Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).ingresarDatos=function(e){a.setState(Object(W.a)({},e.target.id,e.target.value))},a.ingresar=function(e){e.preventDefault();var t,n={cuentaUsuario:a.state.cuentaUsuario,contrasegnaUsuario:w(a.state.contrasegna)};(t=n,new Promise((function(e,a){fetch(Y+"ingresar",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){return a(e)}))}))).then((function(e){e.error?a.setState({mensajeTexto:e.error},(function(){setTimeout(a.setState.bind(Object(T.a)(a),K),5e3)})):(localStorage.setItem("tokenUsuario",e.token),a.props.actualizarUsuario("/app/perfil"))}))},a.redireccionar=function(e){a.props.history.push(e)},a.state=K,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){I().codigoUsuario&&this.redireccionar("/app/perfil")}},{key:"render",value:function(){return o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("form",{noValidate:!0,onSubmit:this.ingresar,className:"cuadro_mensaje una_columna",style:{padding:"20px"}},o.a.createElement("div",{className:"centrado"},o.a.createElement("img",{src:"/img/Logo-Seda-Cusco.png",alt:"Logo WCS"})),o.a.createElement("br",null),this.state.mensajeTexto.length<1?null:o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(L,{tipoCuadro:"peligro"},this.state.mensajeTexto))),o.a.createElement("fieldset",null,o.a.createElement("legend",{align:"left"},"N\xfamero Celular"),o.a.createElement("input",{type:"text",id:"cuentaUsuario",placeholder:"Ejem: 956789871",maxLength:"9",onChange:this.ingresarDatos})),o.a.createElement("fieldset",null,o.a.createElement("legend",{align:"left"},"Contrase\xf1a"),o.a.createElement("input",{type:"password",id:"contrasegna",onChange:this.ingresarDatos})),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"INGRESAR")))),o.a.createElement("br",null))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).cerrarSesion=function(){var e,t={firmaSesion:a.state.usuario.firmaSesion,firmaUsuario:a.state.usuario.firmaDigital};(e=t,new Promise((function(t,a){fetch(Y+"salir",{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){localStorage.removeItem("tokenUsuario"),a.props.actualizarUsuario("/app/ingresar")}))},a.redireccionar=function(e){a.props.history.push(e)},a.state={usuario:I()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario.codigoUsuario||this.redireccionar("/app/ingresar")}},{key:"render",value:function(){return this.state.usuario.codigoUsuario?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"cuadro_mensaje una_columna",style:{padding:"20px"}},o.a.createElement("div",{className:"centrado"},o.a.createElement("img",{src:"/img/Logo-Seda-Cusco.png",alt:"Logo WCS"})),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_rojo",onClick:this.cerrarSesion},"CONFIRMAR")))),o.a.createElement("br",null)):null}}]),t}(n.Component),ee={usuario:I(),mensajeTexto:"",mensajeAlerta:"",codigoUsuario:"",actualContrasegna:"",nuevaContrasegna:"",confiContrasegna:""},te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).ingresarDatos=function(e){a.setState(Object(W.a)({},e.target.id,e.target.value))},a.actualizarContrasegna=function(){a.state.nuevaContrasegna===a.state.confiContrasegna?function(e){var t=k+"contrasegna/";return new Promise((function(a,n){fetch(t,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return a(e.json())})).catch((function(e){return n(e)}))}))}({codigoUsuario:a.state.usuario.codigoUsuario,quien:a.state.usuario.firmaDigital,actualContrasegna:w(a.state.actualContrasegna),nuevaContrasegna:w(a.state.nuevaContrasegna)}).then((function(e){"200"===e[0].codigo?a.setState({mensajeTexto:"Cambio de contrase\xf1a con exito!...",mensajeAlerta:"success"},(function(){setTimeout(a.setState.bind(Object(T.a)(a),ee),3e3)})):a.setState({mensajeTexto:"Contrase\xf1a actual incorrecta!...",mensajeAlerta:"danger"},(function(){setTimeout(a.setState.bind(Object(T.a)(a),ee),3e3)}))})):a.setState({mensajeTexto:"Contrase\xf1a nueva no coincide con la confirmaci\xf3n!...",mensajeAlerta:"danger"},(function(){setTimeout(a.setState.bind(Object(T.a)(a),ee),3e3)}))},a.state=ee,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario||this.props.history.push("/")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"contenedor"},""!==this.state.mensajeTexto?o.a.createElement("div",null,this.state.mensajeTexto):"",o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"una_columna"},o.a.createElement("input",{className:"cuadro_dato",type:"password",id:"actualContrasegna",placeholder:"Ingrese su contrase\xf1a actual",value:this.state.actualContrasegna,onChange:function(t){return e.ingresarDatos(t)}}),o.a.createElement("input",{className:"cuadro_dato",type:"password",id:"nuevaContrasegna",placeholder:"Ingrese su nueva contrase\xf1a",value:this.state.nuevaContrasegna,onChange:function(t){return e.ingresarDatos(t)}}),o.a.createElement("input",{className:"cuadro_dato",type:"password",id:"confiContrasegna",placeholder:"Repetir contrase\xf1a nueva",value:this.state.confiContrasegna,onChange:function(t){return e.ingresarDatos(t)}}))),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",onClick:function(){return e.actualizarContrasegna()}},"Actualizar")))}}]),t}(n.Component),ae={},ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state=ae,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){I().grupo}},{key:"render",value:function(){return I().grupo>0?o.a.createElement("div",{className:"contenedor",style:{marginTop:"30px"}},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"una_columna"},o.a.createElement("a",{className:"actividad_boton_link",href:"/app/actividad/administrador/presion"},"< M\xf3dulo de Actividades/Presi\xf3n >"),o.a.createElement("a",{className:"actividad_boton_link",href:"/app/actividad/administrador/continuidad"},"< M\xf3dulo de Actividades/Continuidad >"),o.a.createElement("a",{className:"actividad_boton_link",href:"/app/reporte/presion"},"< M\xf3dulo de Reporte/Presi\xf3n >"),o.a.createElement("a",{className:"actividad_boton_link",href:"/app/reporte/continuidad"},"< M\xf3dulo de Reporte/Continuidad >")))):o.a.createElement(U,null)}}]),t}(n.Component),oe=function(e){var t=e.actividad,a=e.usuarios,n=e.mostrarModal,r=e.controlModalAgregar,i=e.seleccionDatosActividad,c=e.guardarActividad;return n?o.a.createElement("div",null,o.a.createElement(J,{mostrarModal:n,controlModal:r,tituloModal:"Actividad"},o.a.createElement("form",{noValidate:!0,onSubmit:c,className:"una_columna"},o.a.createElement("div",null,o.a.createElement("b",null,"Periodo: ")," ",t.agnoPeriodo+" - "+t.mesPeriodo," "),o.a.createElement("div",null,o.a.createElement("b",null,"Bloque Urbano:  "),(t.denominacionBloque||"Todos de la Zona").toUpperCase()," "),o.a.createElement("div",null,o.a.createElement("b",null,"Direcci\xf3n:")),o.a.createElement("input",{readOnly:!0,className:"cuadro_dato",defaultValue:t.denominacionLote}),o.a.createElement("div",null,o.a.createElement("b",null,"Operario:")),o.a.createElement("select",{className:"cuadro_dato",onChange:i,value:t.codigoUsuario||"0",id:"codigoUsuario"},o.a.createElement("option",{value:"0"},"-- Seleccione Operario --"),a.map((function(e){return o.a.createElement("option",{value:e.codigoUsuario,key:e.codigoUsuario},e.nombres+" "+e.apellidosPaterno+" "+e.apellidosMaterno)}))),o.a.createElement("div",null,o.a.createElement("b",null,"Fecha Entrega:")),o.a.createElement("input",{className:"cuadro_dato",type:"date",onChange:i,value:t.fechaFinal||f(),id:"fechaFinal"}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Guardar"))))):null},re=a(16),ie=a.n(re),ce=(a(35),M+"/api/actividad/");function le(e){return new Promise((function(t,a){fetch(ce+"impresion/",{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}function se(e){return new Promise((function(t,a){fetch(ce,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}var de=M+"/api/impresion";function ue(e){return new Promise((function(t,a){fetch(de+"/lista",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}var me={pdf:null,tablasActividad:[],PaginasTabla:[]},pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).agregarTitulos=function(e,t,n,o){if(e){var r=document.getElementById("tituloActividades").innerHTML,i=document.getElementById("periodoActividades").innerHTML,c="Pagina "+e.internal.getNumberOfPages()+" de "+t;e.setFontStyle("normal"),e.setFontSize(8),e.text("EPS. SEDACUSCO S.A GERENCIA DE OPERACIONES",5,10),e.text("DEPARTAMENTO DE OPERACIONES DISTRIBUCI\xd3N Y RECOLECCI\xd3N",o/2+145,10),e.text(c,5,n-10),e.setFontSize(15),e.text((r||"Titulo de Actividades").toUpperCase(),o/2,30,"center"),e.text((i||"Periodo de Actividades").toUpperCase(),o/2,45,"center"),a.setState({pdf:e})}},a.generarTablas=function(e){for(var t=[],n=a.props,o=n.cantidadPaginas,r=n.tipoActividad,i=n.mesPeriodo,c=n.agnoPeriodo,l=e?1:o,s=0;s<l;s++){ue({pagina:e||s+1}).then((function(e){if(!e.error){var a=[],n={};(e[0]||[]).sort((function(e,t){return parseInt(e.ordenImpresion)-parseInt(t.ordenImpresion)})).forEach((function(e){var t=0,o={codigoUrbano:e.codigoUrbano,tipoActividad:r,mesPeriodo:i,agnoPeriodo:c};t!==e.paginaImprimir&&(t=e.paginaImpresion),le(o).then((function(o){if(!o.error){var r=[],i=e.denominacionZona.substring(0,e.denominacionZona.indexOf("[")),c=[],l="";o.forEach((function(e){var t=!1;c.forEach((function(a){a===e.codigoUsuario&&(t=!0)}));var a=e.nombreCompleto.trim().length>0?e.nombreCompleto+" - ":"";t||(c.push(e.codigoUsuario),l+=a);var n={codigoUrbano:"",denominacionFuente:"",denominacionZona:"",altitud:A(e.tipoAltitud),ordenBloque1:e.ordenBloque,denominacion:e.denominacionLote,inscripcion:e.codigoInscripcion,de1:"",a1:"",de2:"",a2:"",horas:"",promeio:"",ordenBloque:e.ordenBloque};r.push(n)})),r.push({codigoUrbano:"",denominacionFuente:"",denominacionZona:"",altitud:"",ordenBloque1:"",denominacion:"PROMEDIO PARCIAL",inscripcion:"",de1:"",a1:"",de2:"",a2:"",horas:"",promeio:"",ordenBloque:r.length+1});var s={codigoUrbano:e.codigoUrbano,denominacionFuente:e.denominacionFuente,denominacionZona:i,denominacionBloque:(e.denominacionBloque||"").toUpperCase(),nombresCompletos:l,ordenImpresion:e.ordenImpresion,sector:"ZONA  "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector),bloqueUrbano:e.denominacionBloque};s.direcciones=r,a.push(s),n.numPagina=t}}))})),n.tablas=a,t.push(n)}}))}setTimeout((function(){return a.setState({PaginasTabla:t},(function(){return a.generarPdfImpresion()}))}),2e3)},a.generarPdfImpresion=function(){var e=a.state.PaginasTabla,t=new ie.a("l","pt"),n=e.length,o=t.internal.pageSize.height||t.internal.pageSize.getHeight(),r=t.internal.pageSize.width||t.internal.pageSize.getWidth();t.autoTable({}),e.sort((function(e,t){return e.numPagina-t.numPagina})).forEach((function(e,i){i>0&&t.addPage(),a.agregarTitulos(t,n,o,r),e.tablas.sort((function(e,t){return e.ordenImpresion-t.ordenImpresion})).forEach((function(e,a){var n=[];e.direcciones.sort((function(e,t){return e.ordenBloque-t.ordenBloque})).forEach((function(e){n.push(Object.values(e))}));var o=a?t.previousAutoTable.finalY:40,r=[[{content:e.nombresCompletos,colSpan:7,styles:{halign:"left",fillColor:[255,255,0]}},{content:"HORAS SERVICIO",colSpan:4,cellWidth:80,styles:{halign:"center",fillColor:[255,255,255]}},{content:"",colSpan:2,styles:{halign:"center",fillColor:[255,255,255]}}],[{content:"Sec",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"Fuente",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:e.sector,rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"Altitud",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"N\xb0",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"URBANIZACI\xd3N - CALLE",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"Inscripci\xf3n",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"MA\xd1ANAS",colSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"TARDES",colSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"TOTAL HRS\n DE SEVICIO",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}},{content:"PROMEDIO",rowSpan:2,styles:{halign:"center",fillColor:[255,255,255]}}],[{content:"DE",styles:{halign:"center",fillColor:[255,255,255]}},{content:"A",styles:{halign:"center",fillColor:[255,255,255]}},{content:"DE",styles:{halign:"center",fillColor:[255,255,255]}},{content:"A",styles:{halign:"center",fillColor:[255,255,255]}}],[{content:e.codigoUrbano,styles:{halign:"center",fillColor:[255,255,255]}},{content:e.denominacionFuente,styles:{halign:"center",fillColor:[255,255,255]}},{content:e.denominacionZona,styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:e.denominacionBloque,styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}},{content:"",styles:{halign:"center",fillColor:[255,255,255]}}]];t.autoTable({startY:o+20,head:r,body:n,theme:"plain",columnStyles:{2:{cellWidth:70},5:{cellWidth:200,halign:"left"},7:{cellWidth:40},8:{cellWidth:40},9:{cellWidth:40},10:{cellWidth:40}},styles:{cellPadding:2,minCellHeight:10,halign:"center",valign:"middle",lineWidth:.5,fontSize:6,textColor:0},tableLineColor:[0,0,0],bodyStyles:{lineColor:[0,0,0]},headStyles:{lineColor:[0,0,0]}})}))})),t.save("descargaPdf.pdf"),a.props.controlModalImpresion(),a.setState({estadoInicial:me})},a.imprimirPdf=function(e){a.generarTablas(e)},a.state=me,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.mostrarModalImpresion?o.a.createElement(J,{mostrarModal:this.props.mostrarModalImpresion,controlModal:this.props.controlModalImpresion,tituloModal:"Imprimir Actividades"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"impresion_actividad_botones"},o.a.createElement("button",{className:"boton boton_verde",onClick:function(){return e.imprimirPdf(e.props.paginaActual)}},"Pagina Actual (",this.props.paginaActual,")"),o.a.createElement("button",{className:"boton boton_rojo",onClick:function(){return e.imprimirPdf(0)}},"Todos los Bloques")))):null}}]),t}(n.Component),ge=function(e){var t=e.usuarios,a=e.actividad,n=(e.tipoActividad,e.mostrarModalAsignar),r=e.controlModalAsignar,i=e.asignarOperadorBloque,c=e.seleccionarUsuarioActividad;return o.a.createElement("div",null,o.a.createElement(J,{mostrarModal:n,controlModal:r,tituloModal:"Asignar Operador a "+(a.tipoActividad?"Presion":"Continuidad")},o.a.createElement("form",{noValidate:!0,onSubmit:i,className:"una_columna"},o.a.createElement("div",null,o.a.createElement("b",null,"Periodo: ")," ",a.agnoPeriodo+" - "+a.mesPeriodo," "),o.a.createElement("label",null," ",o.a.createElement("b",null,"Operario: ")," "),o.a.createElement("select",{className:"cuadro_dato",onChange:c,value:a.codigoUsuario,id:"codigoUsuario"},o.a.createElement("option",{value:"0"},"-- Seleccione Operario --"),(t||[]).map((function(e){return o.a.createElement("option",{value:e.codigoUsuario,key:e.codigoUsuario},e.nombres+" "+e.apellidosPaterno+" "+e.apellidosMaterno)}))),o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"dos_columnas"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Asignar"),o.a.createElement("button",{className:"boton boton_rojo",onClick:function(){return r()}},"Cancelar"))))))},be=function(e){var t=e.actividad,a=e.controlModalObservacion,n=e.mostrarModalObservacion;return o.a.createElement(J,{mostrarModal:n,controlModal:a,tituloModal:"Observaci\xf3n de "+(t.tipoActividad?"Presi\xf3n":"Continuidad")},o.a.createElement("form",{noValidate:!0,onSubmit:a,className:"una_columna"},o.a.createElement("div",null,o.a.createElement("b",null,"Periodo: ")," ",t.agnoPeriodo+" - "+t.mesPeriodo," "),o.a.createElement("div",null,o.a.createElement("b",null,"Bloque Urbano:  "),(t.denominacionBloque||"").toUpperCase()," "),o.a.createElement("div",null,o.a.createElement("b",null,"Direcci\xf3n:  "),o.a.createElement("input",{size:"28",defaultValue:t.denominacionLote,readOnly:!0})),o.a.createElement("div",null,o.a.createElement("b",null,"Observaci\xf3n: ")),o.a.createElement("textarea",{readOnly:!0,className:"cuadro_dato",id:"textoObservacion",value:t.textoObservacion||""}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_rojo",type:"submit"},"Cerrar"))))},Ee={bloquesImpresion:[]},he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarBloquesImpresion=function(){ue({pagina:"%"}).then((function(e){e.error||a.setState({bloquesImpresion:e[0]})}))},a.state=Ee,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.listarBloquesImpresion()}},{key:"render",value:function(){return this.props.mostrarModalAjusteImpresion?o.a.createElement(J,{mostrarModal:this.props.mostrarModalAjusteImpresion,controlModal:this.props.controlModalAjusteImpresion,tituloModal:"Ajustes de Imprimir"},o.a.createElement("div",{className:"centrado"},o.a.createElement("label",null,"Modificar Bloques de Impresi\xf3n ",o.a.createElement("b",null,"(Mantenimiento).")))):null}}]),t}(n.Component),fe=M+"/api/observacion/";function ve(e){return new Promise((function(t,a){fetch(fe+"actividad/"+e).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}var Ae=f(),xe={codigoActividad:"",codigoZona:"%",codigoUrbano:"%",codigoUsuario:"%",mesPeriodo:Ae.split("-")[1],agnoPeriodo:Ae.split("-")[0],denominacionZona:"",denominacionAreaServicio:"",denominacionBloque:"",denominacionAltitud:"Alta",nombres:"",apellidosPaterno:"",apellidosMaterno:"",tipoAltitud:"3",tipoActividad:0,fechaCreacion:Ae,fechaFinal:f(Ae,7),codigoObservacion:"",textoObservacion:"",habilitado:"1",quien:I().firmaDigital},Se={codigoActividad:"",codigoUsuario:"",codigoZona:"",codigoDireccion:"",tipoMedicion:"0",fechaCreacion:Ae,fechaFinal:Ae,tipoInscripcion:"---",estadoActividad:"0",habilitado:"1"},ye={usuario:I(),actividadSeleccion:Se,bloqueActividad:xe,actividades:[],sugerenciasActividades:[],usuarios:[],direcciones:[],bloques:[],textoActividadBuscar:"",paginaActual:1,actividadInicioPaginado:1,cantidadPaginas:0,mostrarModal:!1,mostrarModalObservacion:!1,mostrarModalAsignar:!1,mostrarModalImpresion:!1,mostrarModalAjusteImpresion:!1},Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarUsuarios=function(){new Promise((function(e,t){fetch(k+"disponibles").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){a.setState({usuarios:e})}))},a.listarBloquesPagina=function(){var e={pagina:a.state.paginaActual},t=[];ue(e).then((function(e){e.error||(a.setState({bloques:e[0]}),e[0].forEach((function(e){(function(e){return new Promise((function(t,a){fetch(ce+"bloque/",{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))})({codigoUrbano:e.codigoUrbano,tipoActividad:a.props.tipoActividad,mesPeriodo:a.state.bloqueActividad.mesPeriodo,agnoPeriodo:a.state.bloqueActividad.agnoPeriodo}).then((function(e){!e.error&&e.length>0&&(e.forEach((function(e){t.push(e)})),a.setState({sugerenciasActividades:t}))}))})))}))},a.controlModalAgregar=function(){a.setState({mostrarModal:!a.state.mostrarModal})},a.controlModalObservacion=function(){a.setState({mostrarModalObservacion:!a.state.mostrarModalObservacion})},a.controlModalImpresion=function(){a.setState({mostrarModalImpresion:!a.state.mostrarModalImpresion})},a.controlModalAjusteImpresion=function(){a.setState({mostrarModalAjusteImpresion:!a.state.mostrarModalAjusteImpresion})},a.controlModalAsignar=function(){a.setState({mostrarModalAsignar:!a.state.mostrarModalAsignar})},a.seleccionarUsuarioActividad=function(e){var t=a.state.bloqueActividad;t.codigoUsuario=e.target.value,a.setState({bloqueActividad:t})},a.seleccionDatosActividad=function(e){var t=a.state.bloqueActividad;"habilitar"===e.target.id?t.habilitado=!t.habilitado:t[e.target.id]=e.target.value,a.setState({bloqueActividad:t})},a.seleccionarActividad=function(e){if(e){var t=a.state.bloqueActividad;t.codigoUsuario=e.codigoUsuario,t.codigoDireccion=e.codigoDireccion,t.codigoActividad=e.codigoActividad,t.denominacionLote=e.denominacionLote,t.denominacionBloque=e.denominacionBloque,t.fechaCreacion=e.fechaCreacion,t.habilitado=e.habilitado,0===e.codigoUsuario?t.fechaFinal=f(Ae,7):t.fechaFinal=e.fechaFinal,a.setState({bloqueActividad:t,mostrarModal:!a.state.mostrarModal})}},a.guardarActividad=function(e){e.preventDefault();var t=a.state.bloqueActividad,n={codigoActividad:t.codigoActividad,codigoUsuario:t.codigoUsuario||0,codigoDireccion:t.codigoDireccion,fechaCreacion:Ae,fechaFinal:a.state.bloqueActividad.fechaFinal,habilitado:!0,mesPeriodo:a.state.bloqueActividad.mesPeriodo,agnoPeriodo:a.state.bloqueActividad.agnoPeriodo,tipoActividad:a.state.bloqueActividad.tipoActividad,quien:a.state.usuario.firmaDigital};null===t.codigoActividad||""===t.codigoActividad||void 0===t.codigoActividad?se(n).then((function(e){return a.listarBloquesPagina()})):function(e){return new Promise((function(t,a){fetch(ce,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(n).then((function(e){return a.listarBloquesPagina()})),a.controlModalAgregar()},a.verObservacion=function(e){ve(e.codigoActividad).then((function(t){t.error||(e.codigoObservacion=t.codigoObservacion,e.textoObservacion=t.textoObservacion,e.denominacionAreaServicio=a.state.bloqueActividad.denominacionAreaServicio,e.denominacionBloque=a.state.bloqueActividad.denominacionBloque,a.setState({actividadSeleccion:e}),a.controlModalObservacion())}))},a.asignarOperadorBloque=function(e){e.preventDefault();var t=a.state,n=t.bloqueActividad,o=t.bloques,r=0;"0"!==n.codigoUsuario&&"%"!==n.codigoUsuario?o.forEach((function(e,t){var i={codigoUsuario:n.codigoUsuario,codigoUrbano:e.codigoUrbano,mesPeriodo:n.mesPeriodo,agnoPeriodo:n.agnoPeriodo,tipoActividad:n.tipoActividad,fechaFinal:n.fechaFinal,quien:a.state.usuario.firmaDigital};setTimeout((function(){(function(e){return new Promise((function(t,a){fetch(ce+"generar/bloque",{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))})(i).then((function(e){e.error||(r+=1)===o.length&&(a.controlModalAsignar(),a.listarBloquesPagina())}))}),100*t)})):alert("Operador no Seleccionado")},a.cambiarPeriodo=function(e){var t=a.state.bloqueActividad;t[e.target.id]=e.target.value,a.setState({bloqueActividad:t},(function(){a.listarBloquesPagina()}))},a.habilitarActividad=function(e){null===e.codigoActividad?se({codigoUsuario:e.codigoUsuario||0,codigoDireccion:e.codigoDireccion,fechaCreacion:Ae,fechaFinal:Ae,habilitado:!0,mesPeriodo:a.state.bloqueActividad.mesPeriodo,agnoPeriodo:a.state.bloqueActividad.agnoPeriodo,tipoActividad:a.state.bloqueActividad.tipoActividad,quien:a.state.usuario.firmaDigital}).then((function(e){return a.listarBloquesPagina()})):function(e){return new Promise((function(t,a){fetch(ce+"habilitado/",{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}({codigoActividad:e.codigoActividad,habilitado:!e.habilitado,quien:a.state.usuario.firmaDigital}).then((function(e){return a.listarBloquesPagina()}))},a.cambiarPagina=function(e){(e=parseInt(e)>=0?parseInt(e):parseInt(e.target.value)||0)>0&&e<=a.state.cantidadPaginas&&a.setState({paginaActual:e},(function(){return a.listarBloquesPagina()}))},a.state=ye,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.state.usuario.grupo>0){var t=this.state.bloqueActividad,a=this.state.cantidadPaginas;t.tipoActividad=this.props.tipoActividad,new Promise((function(e,t){fetch(de+"/paginas").then((function(t){return e(t.json())})).catch((function(e){return t(e)}))})).then((function(n){n.error||(a=n.paginas),e.setState({bloqueActividad:t,cantidadPaginas:a},(function(){e.listarUsuarios(),e.listarBloquesPagina()}))}))}}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("br",null),o.a.createElement("div",{id:"tituloActividades",className:"navegador_titulo"},"ENCUESTA DE ",this.props.tipoActividad?"PRESI\xd3N":"CONTINUIDAD"," DEL SERVICIO POR ZONA DE ABASTECIMIENTO")),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("div",null,o.a.createElement("select",{className:"cuadro_dato",style:{fontSize:"20px"},onChange:this.cambiarPeriodo,id:"mesPeriodo",value:this.state.bloqueActividad.mesPeriodo},y.map((function(e){return o.a.createElement("option",{value:e.letra,key:e.numero},e.nombre)}))),"\xa0 \u2014 \xa0",o.a.createElement("select",{className:"cuadro_dato",style:{fontSize:"20px"},onChange:this.cambiarPeriodo,value:this.state.bloqueActividad.agnoPeriodo,id:"agnoPeriodo"},C.map((function(e,t){return o.a.createElement("option",{value:e,key:t},e)}))))),o.a.createElement("div",{hidden:!0},o.a.createElement("label",{id:"periodoActividades"},(y[parseInt(this.state.bloqueActividad.mesPeriodo||1)-1].nombre||"")+" - "+this.state.bloqueActividad.agnoPeriodo)),o.a.createElement("br",null),o.a.createElement("div",{className:"buscador_actividad"},o.a.createElement("div",{className:"buscador_actividad_impresion"},o.a.createElement("div",{className:"buscador_actividad_impresion_boton"},o.a.createElement("button",{className:"boton boton_azul",onClick:function(){return e.controlModalAsignar()}},o.a.createElement("img",{src:"/img/agregarUsuario.png",style:{width:"40px",margin:"3px"},alt:"Asignar Operador",title:"Asignar Operador"}),o.a.createElement("br",null),"Asignar Operador"),o.a.createElement("button",{className:"boton boton_rojo",onClick:function(){return e.controlModalImpresion()}},o.a.createElement("img",{src:"/img/pdf.png",style:{width:"45px",margin:"3px"},alt:"Asignar Operador",title:"Asignar Operador"}),o.a.createElement("br",null),"Imprimir Actividades")),o.a.createElement("div",null),o.a.createElement("div",{className:"paginado_impresion"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"paginado"},o.a.createElement("button",{className:"boton boton_azul",style:{fontSize:"15px"},onClick:function(){return e.cambiarPagina(e.state.paginaActual-1)},title:"P\xe1gina anterior"},"\u2190"),o.a.createElement("div",null,o.a.createElement("input",{style:{textAlign:"center",border:"none",fontSize:"1em",width:"35px"},size:2,type:"number",value:this.state.paginaActual,min:"1",pattern:"[0-9]*",name:"pagina_",id:"pagina_",title:"N\xfamero de P\xe1gina : "+this.state.paginaActual,onChange:function(t){return e.cambiarPagina(t)}}),"/",this.state.cantidadPaginas),o.a.createElement("button",{className:"boton boton_azul",style:{fontSize:"15px"},onClick:function(){return e.cambiarPagina(e.state.paginaActual+1)},title:"P\xe1gina siguiente"},"\u2192"))),o.a.createElement("button",{className:"boton",style:{fontSize:"15px"},onClick:function(){return e.controlModalAjusteImpresion()}},"\u2699")))),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:P()?"100%":"70%"},className:"tabla_actividad"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{hidden:P()}),o.a.createElement("th",null,"Direcci\xf3n/Lote"),o.a.createElement("th",{hidden:P()},"Codigo Inscripci\xf3n"),o.a.createElement("th",{hidden:P()},"Fecha de Entrega"),o.a.createElement("th",{hidden:P()},"Estado"),o.a.createElement("th",null,"Operador"),o.a.createElement("th",null,"Obs."))),(this.state.bloques||[]).map((function(t){return o.a.createElement("tbody",{key:t.codigoUrbano},o.a.createElement("tr",null,o.a.createElement("td",{colSpan:6,style:{textAlign:"center",padding:"10px",fontSize:"20px"}},o.a.createElement("b",null," ",t.denominacionBloque.toUpperCase()," - SECTOR (",t.codigoUrbano,")"))),e.state.sugerenciasActividades.filter((function(e){return e.codigoUrbano===t.codigoUrbano})).sort((function(e,t){return e.ordenBloque-t.ordenBloque})).map((function(t){var a=O(t.fechaFinal);return o.a.createElement("tr",{key:t.codigoDireccion,style:{cursor:"pointer"},className:"tabla_fila"},o.a.createElement("td",{hidden:P(),style:{textAlign:"center"}},o.a.createElement("label",{className:"boton_habilitado"},o.a.createElement("input",{type:"checkbox",id:"habilitado",checked:t.habilitado||!1,onChange:function(a){e.habilitarActividad(t)}}),o.a.createElement("div",{className:"boton_deslizar redondo"}))),o.a.createElement("td",{onClick:function(){return e.seleccionarActividad(t)}},t.denominacionLote),o.a.createElement("td",{hidden:P(),style:{textAlign:"center"},onClick:function(){return e.seleccionarActividad(t)}},t.codigoInscripcion),o.a.createElement("td",{hidden:P(),style:{textAlign:"center"},onClick:function(){return e.seleccionarActividad(t)}}," ",t.fechaFinal?o.a.createElement("div",{className:"cuadro_mensaje "+(1===t.estadoActividad&&a?"peligro":"exito"),style:{color:1===t.estadoActividad&&a?"red":""}},t.fechaFinal):o.a.createElement("img",{src:"/img/vacio.png",alt:"Datos sin Programar",title:"Datos Sin Programar"})),o.a.createElement("td",{hidden:P(),style:{textAlign:"center"},onClick:function(){return e.seleccionarActividad(t)}},null!==t.estadoActividad?o.a.createElement("div",{style:{color:1===t.estadoActividad&&a?"red":"green"}},1===t.estadoActividad&&a?"Retraso":S(t.estadoActividad)):o.a.createElement("img",{src:"/img/vacio.png",alt:"Datos sin Programar",title:"Datos Sin Programar"})),o.a.createElement("td",{colSpan:t.observacion?1:2,style:{textAlign:"center"},onClick:function(){return e.seleccionarActividad(t)}},o.a.createElement("b",null,t.codigoActividad?t.codigoUsuario?t.nombres+" "+t.apellidosPaterno:o.a.createElement("img",{src:"/img/agregarUsuario.png",alt:"Asignar Operador",title:"Asignar Operador"}):o.a.createElement("img",{src:"/img/vacio.png",alt:"Datos sin Programar",title:"Datos Sin Programar"}))),o.a.createElement("td",{style:{textAlign:"center",cursor:"pointer"}},t.observacion?o.a.createElement("img",{src:"/img/lupaVer.png",alt:"Ver Observaci\xf3n",title:"Ver Observaci\xf3n",onClick:function(){return e.verObservacion(t)}}):null))})))})))),o.a.createElement("div",{className:"centrado"},this.state.sugerenciasActividades.length>0?null:o.a.createElement("div",{style:{width:"70%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(oe,{actividad:this.state.bloqueActividad,tipoActividad:this.props.tipoActividad,usuarios:this.state.usuarios,direcciones:this.state.direcciones,mostrarModal:this.state.mostrarModal,controlModalAgregar:this.controlModalAgregar,seleccionDatosActividad:this.seleccionDatosActividad,guardarActividad:this.guardarActividad}),o.a.createElement(be,{actividad:this.state.actividadSeleccion,controlModalObservacion:this.controlModalObservacion,mostrarModalObservacion:this.state.mostrarModalObservacion}),o.a.createElement(ge,{usuarios:this.state.usuarios,actividad:this.state.bloqueActividad,tipoActividad:this.props.tipoActividad,mostrarModalAsignar:this.state.mostrarModalAsignar,controlModalAsignar:this.controlModalAsignar,asignarOperadorBloque:this.asignarOperadorBloque,seleccionarUsuarioActividad:this.seleccionarUsuarioActividad}),o.a.createElement(pe,{controlModalImpresion:this.controlModalImpresion,mostrarModalImpresion:this.state.mostrarModalImpresion,paginaActual:this.state.paginaActual,cantidadPaginas:this.state.cantidadPaginas,mesPeriodo:this.state.bloqueActividad.mesPeriodo,agnoPeriodo:this.state.bloqueActividad.agnoPeriodo,tipoActividad:this.props.tipoActividad}),o.a.createElement(he,{controlModalAjusteImpresion:this.controlModalAjusteImpresion,mostrarModalAjusteImpresion:this.state.mostrarModalAjusteImpresion})):o.a.createElement(U,null)}}]),t}(n.Component),Re=M+"/api/presion/";var Pe=M+"/api/continuidad/";var Oe=function(e){var t=e.actividad,a=e.controlModalMedicion,n=e.mostrarModalMedicion,r=e.guardarActividad,i=e.modificarActividadEstado;return n?o.a.createElement(J,{mostrarModal:n,controlModal:a,tituloModal:t.tipoActividad?"Toma de Presi\xf3n":"Toma de Continuidad"},o.a.createElement("form",{noValidate:!0,onSubmit:r,className:"una_columna"},o.a.createElement("div",null,o.a.createElement("b",null,"Periodo: ")," ",t.agnoPeriodo+" - "+t.mesPeriodo," "),o.a.createElement("div",null,o.a.createElement("b",null,"Bloque Urbano:  "),(t.denominacionBloque||"").toUpperCase()),o.a.createElement("div",null,o.a.createElement("b",null,"Direcci\xf3n:  "),o.a.createElement("input",{size:"28",defaultValue:t.denominacionLote,readOnly:!0})),o.a.createElement("div",null,o.a.createElement("b",null,"Inscripcion:  "),(t.codigoInscripcion||"null").toUpperCase()),t.tipoActividad?o.a.createElement("div",{className:"una_columna"},o.a.createElement("label",null,"Presion Alta Arriba"),o.a.createElement("input",{className:"cuadro_dato",type:"number",id:"lecturaArriba",onChange:i,value:t.lecturaArriba||""}),o.a.createElement("label",null,"Presion Alta Abajo"),o.a.createElement("input",{className:"cuadro_dato",type:"number",id:"lecturaAbajo",onChange:i,value:t.lecturaAbajo||""})):o.a.createElement("div",{className:"una_columna"},o.a.createElement("label",null,o.a.createElement("b",null,"Ma\xf1as")),o.a.createElement("div",{className:"dos_columnas"},o.a.createElement("input",{className:"cuadro_dato",type:"time",id:"r1HoraDe",onChange:i,value:t.r1HoraDe||""}),o.a.createElement("input",{className:"cuadro_dato",type:"time",id:"r1HoraA",onChange:i,value:t.r1HoraA||""})),o.a.createElement("label",null,o.a.createElement("b",null,"Tardes")),o.a.createElement("div",{className:"dos_columnas"},o.a.createElement("input",{className:"cuadro_dato",type:"time",id:"r2HoraDe",onChange:i,value:t.r2HoraDe||""}),o.a.createElement("input",{className:"cuadro_dato",type:"time",id:"r2HoraA",onChange:i,value:t.r2HoraA||""}))),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Guardar")))):null},Ne=function(e){var t=e.actividad,a=e.controlModalObservacion,n=e.mostrarModalObservacion,r=e.guardarObservacion,i=e.modificarActividadEstado;return o.a.createElement("div",null,o.a.createElement(J,{mostrarModal:n,controlModal:a,tituloModal:t.tipoActividad?"Presi\xf3n":"Continuidad"},o.a.createElement("form",{noValidate:!0,onSubmit:r,className:"una_columna"},o.a.createElement("div",null,o.a.createElement("b",null,"Periodo: ")," ",t.agnoPeriodo+" - "+t.mesPeriodo," "),o.a.createElement("div",null,o.a.createElement("b",null,"Bloque Urbano:  "),(t.denominacionBloque||"").toUpperCase()),o.a.createElement("div",null,o.a.createElement("b",null,"Direcci\xf3n:  "),o.a.createElement("input",{size:"28",defaultValue:t.denominacionLote,readOnly:!0})),o.a.createElement("div",null,o.a.createElement("b",null,"Inscripcion:  "),(t.codigoInscripcion||"").toUpperCase()),o.a.createElement("div",null,o.a.createElement("b",null,"Observaci\xf3n: ")),o.a.createElement("textarea",{className:"cuadro_dato",id:"textoObservacion",onChange:i,value:t.textoObservacion||""}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Guardar")))))},Me=f(),ke={codigoContinuidad:"",codigoPresion:"",codigoActividad:"",codigoDireccion:"",codigoUsuario:"",denominacionLote:"",estadoActividad:"",fechaCreacion:"",fechaFinal:"",microSector:"",sector:"",subSector:"",tipoInscripcion:"",tipoMedicion:"",lecturaArriba:"",lecturaAbajo:"",r1HoraDe:"",r1HoraA:"",r2HoraDe:"",r2HoraA:"",codigoObservacion:"",textoObservacion:""},Ie={usuario:I(),codigoZona:"1",codigoUrbano:"%",tipoAltitud:"%",tipoActividad:"1",mesPeriodo:Me.split("-")[1],agnoPeriodo:Me.split("-")[0],actividades:[],sugerenciasActividades:[],paginaActual:1,articulosPagina:10,cantidadPaginas:0,textoActividadBuscar:"",mostrarModalMedicion:!1,mostrarModalObservacion:!1,zonas:[],direcciones:[],bloques:[],actividadSeleccion:ke},De=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarActividadesPorUsuario=function(){var e={codigoUsuario:a.state.usuario.codigoUsuario,codigoUrbano:a.state.codigoUrbano,mesPeriodo:a.state.mesPeriodo,agnoPeriodo:a.state.agnoPeriodo,tipoActividad:a.state.tipoActividad},t=a.state.bloques;(function(e){return new Promise((function(t,a){fetch(ce+"usuario",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))})(e).then((function(e){e.error||(t.length<1&&e.forEach((function(e){var a=!1;if(t.length<1)t.push({codigoUrbano:e.codigoUrbano,denominacionBloque:e.denominacionBloque});else{for(var n=0;n<t.length;n++)e.codigoUrbano===t[n].codigoUrbano&&(a=!0);a||t.push({codigoUrbano:e.codigoUrbano,denominacionBloque:e.denominacionBloque})}})),a.setState({actividades:e,sugerenciasActividades:e,bloques:t}))}))},a.seleccionarActividad=function(e){var t,n;e.tipoActividad?(n=e.codigoActividad,new Promise((function(e,t){fetch(Re+n).then((function(t){return e(t.json())})).catch((function(e){return t(e)}))}))).then((function(t){t.error?a.setState({actividadSeleccion:e}):a.setState({actividadSeleccion:t})})):(t=e.codigoActividad,new Promise((function(e,a){fetch(Pe+t).then((function(t){return e(t.json())})).catch((function(e){return a(e)}))}))).then((function(t){t.error?a.setState({actividadSeleccion:e}):a.setState({actividadSeleccion:t})})),a.controlModalMedicion()},a.agregarObservacion=function(e){ve(e.codigoActividad).then((function(t){t.error?a.setState({actividadSeleccion:e}):(e.codigoObservacion=t.codigoObservacion,e.textoObservacion=t.textoObservacion,a.setState({actividadSeleccion:e}))})),a.controlModalObservacion()},a.controlModalObservacion=function(){a.state.mostrarModalObservacion&&a.setState({actividadSeleccion:ke}),a.setState({mostrarModalObservacion:!a.state.mostrarModalObservacion})},a.controlModalMedicion=function(){a.state.mostrarModalMedicion&&a.setState({actividadSeleccion:ke}),a.setState({mostrarModalMedicion:!a.state.mostrarModalMedicion})},a.modificarActividadEstado=function(e){var t=a.state.actividadSeleccion;t[e.target.id]=e.target.value,a.setState({actividadSeleccion:t}),"codigoZona"===e.target.id&&a.listarDirecciones()},a.guardarObservacion=function(e){e.preventDefault();var t={codigoObservacion:a.state.actividadSeleccion.codigoObservacion,codigoActividad:a.state.actividadSeleccion.codigoActividad,tipoActividad:a.state.actividadSeleccion.tipoActividad,textoObservacion:a.state.actividadSeleccion.textoObservacion,quien:a.state.usuario.firmaDigital};a.state.actividadSeleccion.codigoObservacion>0?function(e){new Promise((function(t,a){fetch(fe,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(t):function(e){new Promise((function(t,a){fetch(fe,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(t),a.controlModalObservacion()},a.guardarActividad=function(e){if(e.preventDefault(),a.state.actividadSeleccion.tipoActividad){var t={codigoActividad:a.state.actividadSeleccion.codigoActividad,lecturaArriba:a.state.actividadSeleccion.lecturaArriba,lecturaAbajo:a.state.actividadSeleccion.lecturaAbajo,quien:a.state.usuario.firmaDigital};void 0===a.state.actividadSeleccion.codigoPresion?function(e){return new Promise((function(t,a){fetch(Re,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(t).then((function(e){return a.listarActividadesPorUsuario()})):function(e){return new Promise((function(t,a){fetch(Re,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(t).then((function(e){return a.listarActividadesPorUsuario()}))}else{var n={codigoActividad:a.state.actividadSeleccion.codigoActividad,r1HoraDe:a.state.actividadSeleccion.r1HoraDe,r1HoraA:a.state.actividadSeleccion.r1HoraA,r2HoraDe:a.state.actividadSeleccion.r2HoraDe,r2HoraA:a.state.actividadSeleccion.r2HoraA,quien:a.state.usuario.firmaDigital};void 0===a.state.actividadSeleccion.codigoContinuidad?function(e){return new Promise((function(t,a){fetch(Pe,{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(n).then((function(e){return a.listarActividadesPorUsuario()})):function(e){return new Promise((function(t,a){fetch(Pe,{method:"PUT",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))}(n).then((function(e){return a.listarActividadesPorUsuario()}))}a.controlModalMedicion()},a.cambiarPeriodo=function(e){return a.setState(Object(W.a)({},e.target.id,e.target.value),(function(){return a.listarActividadesPorUsuario()}))},a.cambiarTipoActividad=function(e){return a.setState({tipoActividad:e.target.value},(function(){return a.listarActividadesPorUsuario()}))},a.cambiarBloqueUrbano=function(e){return a.setState({codigoUrbano:e.target.value},(function(){return a.listarActividadesPorUsuario()}))},a.state=Ie,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0===this.state.usuario.grupo&&this.listarActividadesPorUsuario()}},{key:"render",value:function(){var e=this;return 0===this.state.usuario.grupo?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("select",{style:{width:"100%"},className:"cuadro_dato",onChange:this.cambiarPeriodo,id:"mesPeriodo",value:this.state.mesPeriodo},y.map((function(e){return o.a.createElement("option",{value:e.letra,key:e.numero},e.nombre)}))),"\xa0",o.a.createElement("select",{style:{width:"100%"},className:"cuadro_dato",onChange:this.cambiarPeriodo,value:this.state.agnoPeriodo,id:"agnoPeriodo"},C.map((function(e,t){return o.a.createElement("option",{value:e,key:t},e)}))),"\xa0",o.a.createElement("select",{style:{width:"100%"},className:"cuadro_dato",onChange:this.cambiarTipoActividad,id:"tipoActividad",value:this.state.tipoActividad},o.a.createElement("option",{value:"1"},"Presi\xf3n"),o.a.createElement("option",{value:"0"},"Continuidad"))),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("select",{style:{width:"100%"},className:"cuadro_dato",onChange:this.cambiarBloqueUrbano,id:"bloqueUrbano",value:this.state.codigoUrbano},o.a.createElement("option",{value:"%"},"-- Bloque Urbano --"),(this.state.bloques||[]).map((function(e){return o.a.createElement("option",{key:e.codigoUrbano,value:e.codigoUrbano},(e.denominacionBloque||"").toUpperCase())})))),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Actividad"),o.a.createElement("th",null,"Obs."))),(this.state.bloques||[]).filter((function(t){return parseInt(e.state.codigoUrbano)===t.codigoUrbano||"%"===e.state.codigoUrbano})).map((function(t){return o.a.createElement("tbody",{key:t.codigoUrbano},o.a.createElement("tr",null,o.a.createElement("td",{colSpan:6,style:{textAlign:"center",padding:"10px",fontSize:"20px",borderBottom:"3px solid #10679E"}},o.a.createElement("b",null," ",(t.denominacionBloque||"").toUpperCase()," - SECTOR (",t.codigoUrbano,")"))),e.state.sugerenciasActividades.filter((function(e){return e.codigoUrbano===t.codigoUrbano})).sort((function(e,t){return e.ordenBloque-t.ordenBloque})).map((function(t){var a=O(t.fechaFinal);return o.a.createElement("tr",{key:t.codigoActividad,style:{borderBottom:"1px solid lightgray"}},o.a.createElement("td",{style:{textAlign:"center"},onClick:function(){return e.seleccionarActividad(t)}},o.a.createElement("div",{className:"item_actividad_operador"},o.a.createElement("div",null,o.a.createElement("b",null,t.denominacionLote),o.a.createElement("br",null),o.a.createElement("label",{style:{fontSize:"13px"}},o.a.createElement("b",null,"Inscripcci\xf3n: "),t.codigoInscripcion)),o.a.createElement("div",{style:{color:1===t.estadoActividad&&a?"red":t.estadoActividad<2?"orange":"green"}},o.a.createElement("b",null,"Avance: ",1===t.estadoActividad&&a?"Retraso":S(t.estadoActividad))),o.a.createElement("div",{className:"cuadro_mensaje "+(1===t.estadoActividad&&a?"peligro":"exito"),style:{color:1===t.estadoActividad&&a?"red":""}},o.a.createElement("b",null,"Entrega: ",t.fechaFinal)))),o.a.createElement("td",{style:{textAlign:"center"},onClick:function(){return e.agregarObservacion(t)}},o.a.createElement("img",{src:"/img/agregarObservacion.png",alt:"Agregar Observacion",title:"Agregar Observacion"})))})))})))),o.a.createElement("div",{className:"centrado"},this.state.sugerenciasActividades.length>0?null:o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(Oe,{actividad:this.state.actividadSeleccion,controlModalMedicion:this.controlModalMedicion,mostrarModalMedicion:this.state.mostrarModalMedicion,guardarActividad:this.guardarActividad,modificarActividadEstado:this.modificarActividadEstado}),o.a.createElement(Ne,{actividad:this.state.actividadSeleccion,controlModalObservacion:this.controlModalObservacion,mostrarModalObservacion:this.state.mostrarModalObservacion,guardarObservacion:this.guardarObservacion,modificarActividadEstado:this.modificarActividadEstado})):o.a.createElement(U,null)}}]),t}(n.Component),je=M;function Ze(){return new Promise((function(e,t){fetch(je+"/api/zona/").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))}))}var Ue=M;var ze=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){Ze().then((function(e){a.setState({zonas:e})}))},a.listarBloquesUrbanos=function(){a.setState({urbanoInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e;(e={inicio:a.state.urbanoInicioPaginado,resultados:15},new Promise((function(t,a){fetch(Ue+"/api/bloque/paginado/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){a.setState({bloquesUrbanos:e})}))}))},a.controlarVentanaModalAgregar=function(){a.setState({mostrarVentanaAgregarModal:!a.state.mostrarVentanaAgregarModal})},a.seleccionarBloqueUrbano=function(e,t){a.setState({indiceBloqueSeleccionado:e,denominacionBloqueSeleccionado:t,mostrarVentanaEditarModal:!a.state.mostrarVentanaEditarModal})},a.cambiarEstadoBloque=function(e){var t=parseInt(e.target.value);a.setState({indiceBloqueSeleccionado:parseInt(e.target.dataset.bloque)},(function(){var e,n,o={codigo:a.state.indiceBloqueSeleccionado,firma:a.state.usuario.firmaDigital};1===t?(n=o,new Promise((function(e,t){fetch(Ue+"/api/bloque/",{method:"DELETE",body:JSON.stringify(n),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){t(e)}))}))).then((function(e){return a.listarBloquesUrbanos()})):(e=o,new Promise((function(t,a){fetch(Ue+"/api/bloque/habilitar",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){return a.listarBloquesUrbanos()}))}))},a.controlarVentanaModalEditar=function(){a.setState({mostrarVentanaEditarModal:!a.state.mostrarVentanaEditarModal})},a.alterarDenominacionBloque=function(e){a.setState({denominacionBloqueSeleccionado:e.target.value})},a.agregarBloque=function(e){e.preventDefault();var t=document.getElementById("zona_agregar_"),n=document.getElementById("bloque"),o=t.options[t.selectedIndex].value;a.setState({mostrarVentanaAgregarModal:!1},(function(){var e,t={zona:o,denominacion:n.value,firma:a.state.usuario.firmaDigital};(e=t,new Promise((function(t,a){fetch(Ue+"/api/bloque/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.listarBloquesUrbanos()}))}))},a.actualizarDenominacionBloque=function(e){e.preventDefault(),a.setState({mostrarVentanaEditarModal:!1},(function(){var e,t={codigo:a.state.indiceBloqueSeleccionado,denominacion:a.state.denominacionBloqueSeleccionado,firma:a.state.usuario.firmaDigital};(e=t,new Promise((function(t,a){fetch(Ue+"/api/bloque/denominacion",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.listarBloquesUrbanos()}))}))},a.cambiarZona=function(e){var t,n={codigo:e.target.dataset.urbano,zona:e.target.options[e.target.selectedIndex].value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(Ue+"/api/bloque/zona",{method:"PUT",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.listarBloquesUrbanos()}))},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listarBloquesUrbanos()}))},a.redireccionar=function(e){a.props.history.push(e)},a.state={usuario:I(),zonas:[],bloquesUrbanos:[],paginaActual:1,urbanoInicioPaginado:1,indiceBloqueSeleccionado:0,denominacionBloqueSeleccionado:"",mostrarVentanaModalAgregar:!1,mostrarVentanaModalEditar:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario.grupo>0&&(this.listarZonas(),this.listarBloquesUrbanos())}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement(H,{cantidadElementos:this.state.bloquesUrbanos.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"50%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar un Nuevo Bloque Urbano",title:"Registrar/Agregar un Nuevo Bloque Urbano",onClick:function(){return e.controlarVentanaModalAgregar()}})),o.a.createElement("th",{style:{textAlign:"center"}},"Zona"),o.a.createElement("th",null,"Denominaci\xf3n"))),o.a.createElement("tbody",null,this.state.bloquesUrbanos.map((function(t){return o.a.createElement("tr",{key:t.codigoUrbano,className:"tabla_fila"},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("label",{className:"boton_habilitado"},o.a.createElement("input",{type:"checkbox",onChange:e.cambiarEstadoBloque,checked:1===parseInt(t.habilitado),value:1===parseInt(t.habilitado)?1:0,"data-bloque":t.codigoUrbano,name:"chkBox"+t.codigoUrbano,id:"chkBox"+t.codigoUrbano}),o.a.createElement("div",{className:"boton_deslizar redondo"}))),o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("select",{className:"cuadro_dato",name:"zona_"+t.codigoUrbano,id:"zona_"+t.codigoUrbano,value:t.codigoZona,"data-urbano":t.codigoUrbano,onChange:e.cambiarZona},o.a.createElement("option",{value:"0"}," Seleccione la zona "),e.state.zonas.map((function(e,t){return o.a.createElement("option",{key:"z"+t,value:e.codigoZona}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))})))),o.a.createElement("td",{onClick:function(){e.seleccionarBloqueUrbano(t.codigoUrbano,t.denominacionBloque)}},t.denominacionBloque.toUpperCase()))}))))),o.a.createElement("div",{className:"centrado"},this.state.bloquesUrbanos.length>0?null:o.a.createElement("div",{style:{width:"50%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaAgregarModal,controlModal:this.controlarVentanaModalAgregar,tituloModal:"Nueva Fuente de Agua"},o.a.createElement("form",{noValidate:!0,onSubmit:this.agregarBloque,className:"una_columna"},o.a.createElement("label",{htmlFor:"zona_agregar_"}," Zona Comercial : \xa0",o.a.createElement("select",{className:"cuadro_dato",name:"zona_agregar_",id:"zona_agregar_",required:!0},o.a.createElement("option",{value:"0"}," Seleccione la zona "),this.state.zonas.map((function(e,t){return o.a.createElement("option",{key:"z"+t,value:e.codigoZona}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))})))),o.a.createElement("label",{htmlFor:"bloque"},"Denominaci\xf3n del Bloque Urbano"),o.a.createElement("input",{className:"cuadro_dato",type:"text",size:"40",required:!0,name:"bloque",id:"bloque",placeholder:"Nombre de la fuente de agua"}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Agregar")))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaEditarModal,controlModal:this.controlarVentanaModalEditar,tituloModal:"Editar Fuente de Agua"},o.a.createElement("form",{noValidate:!0,onSubmit:this.actualizarDenominacionBloque,className:"una_columna"},o.a.createElement("label",{htmlFor:"bloqueModificado"},"Nueva denominaci\xf3n de la Fuente de Agua"),o.a.createElement("input",{className:"cuadro_dato",type:"text",required:!0,name:"bloqueModificado",id:"bloqueModificado",placeholder:"Nombre del BloqueUrbano",onChange:this.alterarDenominacionBloque,value:this.state.denominacionBloqueSeleccionado}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Actualizar"))))):o.a.createElement(U,null)}}]),t}(n.Component),_e=M;var Te=f(),we={usuario:I(),zonas:[],fechaTotalConexiones:[],identificadorZona:3,tieneConexiones:1,mesesAgno:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],agnoPeriodo:Te.split("-")[0],agnos:["2018","2019","2020","2021","2022","2023","2024","2025"],codigoTotalConexion:0,mesSeleccionado:parseInt((new Date).getMonth())+1,agnoSeleccionado:parseInt((new Date).getFullYear()),totalConexionesSeleccionado:0,mostrarVentanaModalRegistrar:!1,mensajeTexto:""},Fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){Ze().then((function(e){return a.setState({zonas:e})}))},a.listarTotalConexiones=function(){var e,t={zona:a.state.identificadorZona,agno:a.state.agnoPeriodo};(e=t,new Promise((function(t,a){fetch(_e+"/api/conexion/total/zonaperiodo/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){return a.setState({fechaTotalConexiones:e})}))},a.cambiarCodigoZona=function(e){a.state.zonas.filter((function(t){return t.codigoZona===parseInt(e.target.value)})).map((function(e){return a.setState({identificadorZona:e.codigoZona,tieneConexiones:e.tieneConexiones},(function(){return a.listarTotalConexiones()})),0}))},a.controlVentanaModalRegistrar=function(){a.state.mostrarVentanaModalRegistrar?a.setState({codigoTotalConexion:0,mesSeleccionado:parseInt((new Date).getMonth())+1,agnoSeleccionado:parseInt((new Date).getFullYear()),totalConexionesSeleccionado:0,mostrarVentanaModalRegistrar:!1}):a.state.tieneConexiones?a.setState({mostrarVentanaModalRegistrar:!0}):alert("NO SE PUEDE AGREGAR DATOS (Zona NO habilitada para registrar Conexiones)")},a.controlAlertaModalRegistrar=function(e){a.setState({mensajeTexto:e},(function(){setTimeout(a.setState.bind(Object(T.a)(a),we),5e3)}))},a.registrarTotalConexion=function(e){e.preventDefault();var t,n,o={codigo:a.state.codigoTotalConexion,zona:a.state.identificadorZona,mes:document.getElementById("mesSeleccionado").value,agno:document.getElementById("agnoSeleccionado").value,conexiones:document.getElementById("totalConexionesSeleccionado").value,quien:a.state.usuario.firmaDigital};a.state.codigoTotalConexion>0?(n=o,new Promise((function(e,t){fetch(_e+"/api/conexion/",{method:"PUT",body:JSON.stringify(n),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){t(e)}))}))).then((function(e){e[0].error?a.controlAlertaModalRegistrar("Registros Existente"):a.setState({mostrarVentanaModalRegistrar:!1},(function(){return a.listarTotalConexiones()}))})):(t=o,new Promise((function(e,a){fetch(_e+"/api/conexion/",{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){a(e)}))}))).then((function(e){e[0].error?a.controlAlertaModalRegistrar("Registro Existente"):a.setState({mostrarVentanaModalRegistrar:!1},(function(){return a.listarTotalConexiones()}))}))},a.modificarTotalConexiones=function(e,t,n,o){a.state.tieneConexiones?a.setState({codigoTotalConexion:e,mesSeleccionado:t,agnoSeleccionado:n,totalConexionesSeleccionado:o,mostrarVentanaModalRegistrar:!a.state.mostrarVentanaModalRegistrar}):alert("NO SE PUEDE MODIFICAR LOS DATOS")},a.redireccionar=function(e){a.props.history.push(e)},a.cambiarAgno=function(e){return a.setState(Object(W.a)({},e.target.id,e.target.value),(function(){return a.listarTotalConexiones()}))},a.state=we,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario.grupo>0&&(this.listarZonas(),this.listarTotalConexiones())}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado",style:{alignItems:"center"}},o.a.createElement("select",{className:"cuadro_dato",onChange:this.cambiarAgno,id:"agnoPeriodo",value:this.state.agnoPeriodo},this.state.agnos.map((function(e){return o.a.createElement("option",{value:e,key:e},e)}))),"\xa0 \u2014 \xa0",o.a.createElement("select",{className:"cuadro_dato",name:"zona_",id:"zona_",value:this.state.identificadorZona,onChange:this.cambiarCodigoZona,"data-sector":"sies"},o.a.createElement("option",{value:"0"}," Seleccione la zona "),this.state.zonas.map((function(e){return o.a.createElement("option",{key:e.codigoZona,value:e.codigoZona,"data-sector":e}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))})))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"30%"}},o.a.createElement("thead",null,o.a.createElement("tr",{style:{textAlign:"center"}},o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar Numero de conexiones Activas",title:"Registrar/Agregar Numero de conexiones Activas",onClick:function(){return e.controlVentanaModalRegistrar()}})),o.a.createElement("th",null,"Mes"),o.a.createElement("th",null,"N\xfamero de Conexiones",o.a.createElement("br",null),"(TOTALES)"))),o.a.createElement("tbody",null,this.state.fechaTotalConexiones.map((function(t,a){return o.a.createElement("tr",{key:a,className:"tabla_fila"},o.a.createElement("td",null),o.a.createElement("td",{style:{textAlign:"center"}},e.state.mesesAgno[parseInt(t.mes)-1].toUpperCase()),o.a.createElement("td",{style:{textAlign:"center",fontSize:"20pt"},onClick:function(){return e.modificarTotalConexiones(t.codigoTotalConexion,t.mes,t.agno,t.numeroConexiones)}},t.numeroConexiones))}))))),o.a.createElement("div",{className:"centrado"},this.state.fechaTotalConexiones.length>0?null:o.a.createElement("div",{style:{width:"30%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaModalRegistrar,controlModal:this.controlVentanaModalRegistrar,tituloModal:"Registrar Total de Conexiones"},o.a.createElement("form",{noValidate:!0,onSubmit:this.registrarTotalConexion},this.state.mensajeTexto.length<1?null:o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(L,{tipoCuadro:"peligro"},this.state.mensajeTexto))),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"mesSeleccionado"},"Mes/a\xf1o de Registro :"),"\xa0",o.a.createElement("select",{className:"cuadro_dato",name:"mesSeleccionado",id:"mesSeleccionado",defaultValue:this.state.mesSeleccionado},this.state.mesesAgno.map((function(e,t){return o.a.createElement("option",{key:t,value:t+1<10?"0"+(t+1):t+1},e)})))," / ",o.a.createElement("input",{className:"cuadro_dato",type:"number",name:"agnoSeleccionado",id:"agnoSeleccionado",pattern:"[0-9]*",min:"2018",style:{width:"4em"},defaultValue:parseInt(this.state.agnoSeleccionado)}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"conexiones"},"Total de Conexiones :"),"\xa0",o.a.createElement("input",{className:"cuadro_dato",type:"number",min:"0",name:"totalConexionesSeleccionado",id:"totalConexionesSeleccionado",defaultValue:this.state.totalConexionesSeleccionado}),o.a.createElement("br",null)," ",o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Registrar"))))):o.a.createElement(U,null)}}]),t}(n.Component),qe=M;var Ve={usuario:I(),zonas:[],totalConexionesProdAgua:[],zonaSeleccionado:"%",altitudSeleccionado:"%",paginaActual:1,conexionInicioPaginado:1,codigoProdConexion:0,zonaRegistro:0,altitudRegistro:0,conexionesRegistro:0,mostrarVentanaModalRegistrar:!1,mensajeTexto:""},Be=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){Ze().then((function(e){a.setState({zonas:e})}))},a.listarTotalConexionesProdAgua=function(){a.setState({conexionInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e,t={zona:a.state.zonaSeleccionado,altitud:a.state.altitudSeleccionado,inicio:a.state.conexionInicioPaginado,resultados:15};(e=t,new Promise((function(t,a){fetch(qe+"/api/conexionprod/total/zonaaltitud/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){e.error||a.setState({totalConexionesProdAgua:e})}))}))},a.controlVentanaModalRegistrar=function(){a.setState({mostrarVentanaModalRegistrar:!a.state.mostrarVentanaModalRegistrar})},a.controlVentanaModalRegistrar=function(){a.state.mostrarVentanaModalRegistrar&&a.setState({zonaRegistro:0,altitudRegistro:0,conexionesRegistro:0}),a.setState({mostrarVentanaModalRegistrar:!a.state.mostrarVentanaModalRegistrar})},a.controlAlertaModalRegistrar=function(e){a.setState({mensajeTexto:e},(function(){setTimeout(a.setState.bind(Object(T.a)(a),Ve),5e3)}))},a.cambiarZonaSeleccionado=function(e){a.setState({zonaSeleccionado:e.target.value},(function(){return a.listarTotalConexionesProdAgua()}))},a.cambiarAltitudSeleccionado=function(e){a.setState({altitudSeleccionado:e.target.value},(function(){return a.listarTotalConexionesProdAgua()}))},a.registrarTotalConexiones=function(e){e.preventDefault();var t,n,o={codigo:a.state.codigoProdConexion,zona:document.getElementById("zonaRegistro").value,altitud:document.getElementById("altitudRegistro").value,conexiones:document.getElementById("conexionesRegistro").value,quien:a.state.usuario.firmaDigital};a.state.codigoProdConexion>0?(n=o,new Promise((function(e,t){fetch(qe+"/api/conexionprod/",{method:"PUT",body:JSON.stringify(n),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){t(e)}))}))).then((function(e){e[0].error?a.controlAlertaModalRegistrar("Registro Existente"):a.setState({mostrarVentanaModalRegistrar:!1},(function(){return a.listarTotalConexionesProdAgua()}))})):(t=o,new Promise((function(e,a){fetch(qe+"/api/conexionprod/",{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){return a(e)}))}))).then((function(e){e[0].error?a.controlAlertaModalRegistrar("Registro Existente"):a.setState({mostrarVentanaModalRegistrar:!1},(function(){return a.listarTotalConexionesProdAgua()}))}))},a.modificarTotalConexiones=function(e){a.setState({codigoProdConexion:e.codigoProdConexion,zonaRegistro:e.codigoZona,altitudRegistro:e.tipoAltitud,conexionesRegistro:e.numeroConexiones,mostrarVentanaModalRegistrar:!a.state.mostrarVentanaModalRegistrar})},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listarTotalConexionesProdAgua()}))},a.redireccionar=function(e){a.props.history.push(e)},a.state=Ve,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario.grupo>0&&(this.listarZonas(),this.listarTotalConexionesProdAgua())}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado",style:{alignItems:"center"}},o.a.createElement("select",{className:"cuadro_dato",value:this.state.zonaSeleccionado,onChange:this.cambiarZonaSeleccionado},o.a.createElement("option",{value:"%"}," Seleccione la zona "),this.state.zonas.filter((function(e){return e.esSector})).map((function(e){return o.a.createElement("option",{key:e.codigoZona,value:e.codigoZona}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))}))),"\xa0 \u2014 \xa0",o.a.createElement("select",{className:"cuadro_dato",id:"altitudSeleccionado",value:this.state.altitudSeleccionado,onChange:this.cambiarAltitudSeleccionado},o.a.createElement("option",{value:"%"}," Seleccione la altitud "),o.a.createElement("option",{value:"3"},"Alta"),o.a.createElement("option",{value:"2"},"Media"),o.a.createElement("option",{value:"1"},"Baja"),o.a.createElement("option",{value:"0"},"SNES"))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(H,{cantidadElementos:this.state.totalConexionesProdAgua.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"40%"}},o.a.createElement("thead",null,o.a.createElement("tr",{style:{textAlign:"center"}},o.a.createElement("th",{style:{width:"1%"}},o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar Datos de conexiones de la Ofi. Producci\xf3n de Agua",title:"Registrar/Agregar Datos de conexiones de la Ofi. Producci\xf3n de Agua",onClick:function(){return e.controlVentanaModalRegistrar()}})),o.a.createElement("th",null,"Zona"),o.a.createElement("th",null,"Altitud"),o.a.createElement("th",null,"N\xfamero de",o.a.createElement("br",null),"Conexiones"))),o.a.createElement("tbody",null,this.state.totalConexionesProdAgua.map((function(t,a){return o.a.createElement("tr",{key:a,className:"tabla_fila"},o.a.createElement("td",null),o.a.createElement("td",{style:{textAlign:"center"}},"Zona \xa0"+h(t.sector)+(0===parseInt(t.subSector)?"":" \u2014 "+h(t.subSector))+("-"===t.microSector?"":" \u2014 "+t.microSector)),o.a.createElement("td",{style:{textAlign:"center"}}," ",A(t.tipoAltitud)," "),o.a.createElement("td",{style:{textAlign:"center",fontSize:"20pt"},onClick:function(){return e.modificarTotalConexiones(t)}},t.numeroConexiones))}))))),o.a.createElement("div",{className:"centrado"},this.state.totalConexionesProdAgua.length>0?null:o.a.createElement("div",{style:{width:"40%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaModalRegistrar,controlModal:this.controlVentanaModalRegistrar,tituloModal:"Registrar Total de Conexiones"},o.a.createElement("form",{noValidate:!0,onSubmit:this.registrarTotalConexiones,className:"una_columna"},this.state.mensajeTexto.length<1?null:o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(L,{tipoCuadro:"peligro"},this.state.mensajeTexto))),o.a.createElement("label",{htmlFor:"zonaRegistro"},"Zona : \xa0",o.a.createElement("select",{className:"cuadro_dato",name:"zonaRegistro",id:"zonaRegistro",defaultValue:this.state.zonaRegistro},o.a.createElement("option",{value:"0"},"Seleccione Zona"),this.state.zonas.filter((function(e){return e.esSector})).map((function(e){return o.a.createElement("option",{key:e.codigoZona,value:e.codigoZona}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))})))),o.a.createElement("label",{htmlFor:"altitudRegistro"},"Altitud : \xa0",o.a.createElement("select",{className:"cuadro_dato",id:"altitudRegistro",defaultValue:this.state.altitudRegistro},o.a.createElement("option",{value:"0"},"Seleccione Altitud"),o.a.createElement("option",{value:"3"},"Alta"),o.a.createElement("option",{value:"2"},"Media"),o.a.createElement("option",{value:"1"},"Baja"))),o.a.createElement("label",{htmlFor:"conexionesRegistro"},"Conexiones : \xa0",o.a.createElement("input",{className:"cuadro_dato",type:"number",min:"0",name:"conexionesRegistro",id:"conexionesRegistro",defaultValue:this.state.conexionesRegistro})),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Registrar"))))):o.a.createElement(U,null)}}]),t}(n.Component),He=M;var Le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){Ze().then((function(e){a.setState({zonas:e})}))},a.listarBloquesUrbanos=function(){new Promise((function(e,t){fetch(Ue+"/api/bloque/").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){return a.setState({bloques:e})}))},a.listarBloquesPorZona=function(e){var t;(t={zona:e},new Promise((function(e,a){fetch(Ue+"/api/bloque/zona",{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){return a(e)}))}))).then((function(e){e.error||a.setState({bloquesZona:e})}))},a.listaDirecciones=function(){a.setState({direccionInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e;(e={inicio:a.state.direccionInicioPaginado,resultados:15},new Promise((function(t,a){fetch(He+"/api/direccion/paginado/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.setState({direcciones:e})}))}))},a.cambiarZonaRegistro=function(e){a.listarBloquesPorZona(e.target.value)},a.cambiarZona=function(e){a.setState({zonaConsultada:e.target.value},(function(){a.listaDirecciones()}))},a.controlarVentanaModalAgregar=function(){a.setState({mostrarVentanaModalAgregar:!a.state.mostrarVentanaModalAgregar})},a.controlarVentanaModalEditar=function(){a.setState({mostrarVentanaModalEditar:!a.state.mostrarVentanaModalEditar})},a.controlVentanaModalArchivo=function(){a.state.mostrarVentanaModalArchivo&&a.setState({archivoCSV:null,nombreArchivo:"Seleccione un archivo (.csv)"}),a.setState({mostrarVentanaModalArchivo:!a.state.mostrarVentanaModalArchivo})},a.seleccionarDireccion=function(e,t,n){a.setState({codigoDireccionSeleccionada:e,denominacionDireccionSeleccionada:t,inscripcionDireccionSeleccionada:n,mostrarVentanaModalEditar:!a.state.mostrarVentanaModalEditar})},a.seleccionarArchivo=function(e){var t=e.target.files[0];"text/csv"===t.type?a.setState({archivoCSV:t,nombreArchivo:t.name}):alert("Solo archivos MicroSoft Excel (.csv)")},a.importarArchivo=function(e){e.preventDefault(),null!==a.state.archivoCSV?function(e){var t=new FormData,a=e.name.split(".")[0]+"-"+f()+".csv";return t.append("archivo",e,a),new Promise((function(e,a){fetch(He+"/api/direccion/importar",{method:"POST",body:t}).then((function(t){return e(t.json())})).catch((function(e){return a(e)}))}))}(a.state.archivoCSV).then((function(e){e?(a.listaDirecciones(),a.controlVentanaModalArchivo()):alert("Error al importar Archivo...")})):alert("Seleccione un archivo")},a.agregarNuevaDireccion=function(e){e.preventDefault();var t,n={zona:document.getElementById("zn_Agregar_").value,bloque:document.getElementById("bu_Agregar_").value,denominacion:document.getElementById("nmbZn_Agregar_").value,altitud:document.getElementById("alt_Agregar_").value,inscripcion:document.getElementById("cdI_Agregar_").value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(He+"/api/direccion/",{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.setState({mostrarVentanaModalAgregar:!1}),a.listaDirecciones()}))},a.cambiarEstadoDireccion=function(e){var t=parseInt(e.target.value);a.setState({codigoDireccionSeleccionada:parseInt(e.target.name)},(function(){var e,n={codigo:a.state.codigoDireccionSeleccionada,firma:a.state.usuario.firmaDigital};1===t?(e=n,new Promise((function(t,a){fetch(He+"/api/direccion/",{method:"DELETE",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.listaDirecciones()})):function(e){return new Promise((function(t,a){fetch(He+"/api/direccion/habilitar",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))}(n).then((function(e){a.listaDirecciones()}))}))},a.modificarNombreDireccion=function(e){e.preventDefault(),a.setState({mostrarVentanaModalEditar:!1},(function(){var e,t={codigo:a.state.codigoDireccionSeleccionada,denominacion:a.state.denominacionDireccionSeleccionada,inscripcion:a.state.inscripcionDireccionSeleccionada,firma:a.state.usuario.firmaDigital};(e=t,new Promise((function(t,a){fetch(He+"/api/direccion/",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.listaDirecciones()}))}))},a.cambiarZonaDireccion=function(e){var t,n={codigo:e.target.dataset.direccion,zona:e.target.options[e.target.selectedIndex].value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(He+"/api/direccion/actualizarZona",{method:"PUT",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.listaDirecciones()}))},a.cambiarBloqueUrbano=function(e){var t,n={codigo:e.target.dataset.direccion,bloque:e.target.options[e.target.selectedIndex].value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(He+"/api/direccion/actualizarBloqueUrbano",{method:"PUT",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.listaDirecciones()}))},a.cambiarAltitud=function(e){var t,n={codigo:e.target.dataset.direccion,altitud:e.target.options[e.target.selectedIndex].value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(He+"/api/direccion/actualizarAltitud",{method:"PUT",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.listaDirecciones()}))},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listaDirecciones()}))},a.redireccionar=function(e){a.props.history.push(e)},a.state={usuario:I(),zonas:[],direcciones:[],bloques:[],bloquesZona:[],zonaConsultada:1,nombreZonaConsultada:"",paginaActual:1,direccionInicioPaginado:1,codigoDireccionSeleccionada:0,denominacionDireccionSeleccionada:"",inscripcionDireccionSeleccionada:"",mostrarVentanaModalAgregar:!1,mostrarVentanaModalEditar:!1,mostrarVentanaModalArchivo:!1,archivoCSV:null,nombreArchivo:"Seleccione un archivo (.csv)"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario.grupo>0&&this.setState({direccionInicioPaginado:15*(parseInt(this.state.paginaActual)-1)},(function(){e.listarZonas(),e.listarBloquesUrbanos(),e.listaDirecciones()}))}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement(H,{cantidadElementos:this.state.direcciones.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",onClick:this.controlVentanaModalArchivo},"Importar")),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"90%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar una Nueva Direcci\xf3n",title:"Registrar/Agregar una Nueva Direcci\xf3n",onClick:function(){return e.controlarVentanaModalAgregar()}})),o.a.createElement("th",null," Zona Comercial"),o.a.createElement("th",null," Bloque Urbano "),o.a.createElement("th",null," Denominaci\xf3n relativa a una direcci\xf3n "),o.a.createElement("th",null," Altitud "),o.a.createElement("th",null," C\xf3digo de inscripci\xf3n "))),o.a.createElement("tbody",null,this.state.direcciones.map((function(t){return o.a.createElement("tr",{key:t.codigoDireccion,"data-id":t.codigoDireccion,className:"tabla_fila"},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("label",{className:"boton_habilitado"},o.a.createElement("input",{type:"checkbox",onChange:e.cambiarEstadoDireccion,checked:1===parseInt(t.habilitado),value:1===parseInt(t.habilitado)?1:0,name:t.codigoDireccion,id:"chkBox"+t.codigoDireccion}),o.a.createElement("div",{className:"boton_deslizar redondo"}))),o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("select",{className:"cuadro_dato",name:"zona_"+t.codigoDireccion,id:"zona_"+t.codigoDireccion,value:t.codigoZona,"data-direccion":t.codigoDireccion,onChange:e.cambiarZonaDireccion},o.a.createElement("option",{value:"0"}," Seleccionar Zona "),(e.state.zonas||[]).map((function(e,t){return o.a.createElement("option",{key:t,value:e.codigoZona}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)," ")})))),o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("select",{className:"cuadro_dato",value:t.codigoUrbano,name:"bloque_"+t.codigoDireccion,id:"bloque_"+t.codigoDireccion,"data-direccion":t.codigoDireccion,onChange:e.cambiarBloqueUrbano},o.a.createElement("option",{value:"0"}," Seleccionar Bloque Urbano"),(e.state.bloques||[]).map((function(e){return o.a.createElement("option",{key:e.codigoUrbano,value:e.codigoUrbano}," ",e.denominacionBloque.toUpperCase()," ")})))),o.a.createElement("td",{onClick:function(){e.seleccionarDireccion(t.codigoDireccion,t.denominacionLote,t.codigoInscripcion)}},t.denominacionLote),o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("select",{className:"cuadro_dato",value:t.tipoAltitud,name:"altitud_"+t.codigoDireccion,id:"altitud_"+t.codigoDireccion,"data-direccion":t.codigoDireccion,onChange:e.cambiarAltitud},o.a.createElement("option",{value:"0"},"Altitud"),o.a.createElement("option",{value:"3"},"Alta"),o.a.createElement("option",{value:"2"},"Media"),o.a.createElement("option",{value:"1"},"Baja"))),o.a.createElement("td",{style:{textAlign:"center"},onClick:function(){e.seleccionarDireccion(t.codigoDireccion,t.denominacionLote,t.codigoInscripcion)}},t.codigoInscripcion))}))))),o.a.createElement("div",{className:"centrado"},this.state.direcciones.length>0?null:o.a.createElement("div",{style:{width:"90%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaModalAgregar,controlModal:this.controlarVentanaModalAgregar,tituloModal:"Nueva Direcci\xf3n"},o.a.createElement("form",{noValidate:!0,onSubmit:this.agregarNuevaDireccion,className:"una_columna"},o.a.createElement("label",{htmlFor:"bu_Agregar_"},"Zona Asignada:"),o.a.createElement("select",{className:"cuadro_dato",name:"zn_Agregar_",id:"zn_Agregar_",onChange:this.cambiarZonaRegistro},o.a.createElement("option",{value:"0"}," Seleccionar Zona "),(this.state.zonas||[]).map((function(e,t){return o.a.createElement("option",{key:t,value:e.codigoZona}," ","Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))}))),o.a.createElement("label",{htmlFor:"bu_Agregar_"},"Bloque Urbano:"),o.a.createElement("select",{className:"cuadro_dato",name:"bu_Agregar_",id:"bu_Agregar_",required:!0},o.a.createElement("option",{value:"0"}," Seleccionar Bloque Urbano"),(this.state.bloquesZona||[]).map((function(e,t){return o.a.createElement("option",{key:t,value:e.codigoUrbano}," ",e.denominacionBloque," ")}))),o.a.createElement("label",{htmlFor:"alt_Agregar_"},"Tipo de Altitud:"),o.a.createElement("select",{className:"cuadro_dato",name:"alt_Agregar_",id:"alt_Agregar_",required:!0},o.a.createElement("option",{value:"0"},"Seleccionar Altitud"),o.a.createElement("option",{value:"3"},"Alta"),o.a.createElement("option",{value:"2"},"Media"),o.a.createElement("option",{value:"1"},"Baja")),o.a.createElement("label",{htmlFor:"nmbZn_Agregar_"},"Denominaci\xf3n de Direcci\xf3n:"),o.a.createElement("input",{className:"cuadro_dato",type:"text",size:40,name:"nmbZn_Agregar_",id:"nmbZn_Agregar_"}),o.a.createElement("label",{htmlFor:"cdI_Agregar_"},"C\xf3digo de Inscripci\xf3n:"),o.a.createElement("input",{className:"cuadro_dato",type:"text",size:40,name:"cdI_Agregar_",id:"cdI_Agregar_"}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Agregar")))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaModalEditar,controlModal:this.controlarVentanaModalEditar,tituloModal:"Modificar la Denominaci\xf3n de la Direcci\xf3n"},o.a.createElement("form",{noValidate:!0,onSubmit:this.modificarNombreDireccion,className:"una_columna"},o.a.createElement("label",{htmlFor:"nombreZonaModificado_"},"Denominaci\xf3n de una direcci\xf3n"),o.a.createElement("input",{className:"cuadro_dato",type:"text",size:50,name:"nombreZonaModificado_",id:"nombreZonaModificado_",value:this.state.denominacionDireccionSeleccionada,onChange:function(t){return e.setState({denominacionDireccionSeleccionada:t.target.value})}}),o.a.createElement("label",{htmlFor:"inscripcion_edtr_"},"C\xf3digo de Inscripci\xf3n"),o.a.createElement("input",{className:"cuadro_dato",type:"text",size:50,name:"inscripcion_edtr_",id:"inscripcion_edtr_",value:this.state.inscripcionDireccionSeleccionada,onChange:function(t){return e.setState({inscripcionDireccionSeleccionada:t.target.value})}}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Actualizar")))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaModalArchivo,controlModal:this.controlVentanaModalArchivo,tituloModal:"Importar MS Excel CSV"},o.a.createElement("form",{noValidate:!0,onSubmit:this.importarArchivo,className:"una_columna"},o.a.createElement("div",{className:"cuadro_archivo"},o.a.createElement("input",{style:{opacity:"0"},type:"file",id:"archivoDireccion",lang:"es",onChange:function(t){return e.seleccionarArchivo(t)}}),o.a.createElement("label",{className:"cuadro_archivo_nombre",htmlFor:"archivoDireccion"},this.state.nombreArchivo)),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Importar"))))):o.a.createElement(U,null)}}]),t}(n.Component),Je=M;var Xe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarFuentesAgua=function(){a.setState({fuenteAguaInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e;(e={inicio:a.state.fuenteAguaInicioPaginado,resultados:15},new Promise((function(t,a){fetch(Je+"/api/fuente/paginado/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){a.setState({fuentesAgua:e})}))}))},a.listarZonasFuente=function(){new Promise((function(e,t){fetch(Je+"/api/zona/fuentes/registradas/").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){e.length>0&&a.setState({zonasFuentes:e})}))},a.alterarDenominacionFuenteAgua=function(e){a.setState({denominacionFuenteAguaSeleccionada:e.target.value})},a.seleccionarFuenteAgua=function(e,t){a.setState({indiceFuenteAguaSeleccionada:e,denominacionFuenteAguaSeleccionada:t,mostrarVentanaEditarModal:!a.state.mostrarVentanaEditarModal})},a.cambiarEstadoFuenteAgua=function(e){var t=parseInt(e.target.value);a.setState({indiceFuenteAguaSeleccionada:parseInt(e.target.dataset.fuente)},(function(){var e,n,o={codigo:a.state.indiceFuenteAguaSeleccionada,firma:a.state.usuario.firmaDigital};1===t?(n=o,new Promise((function(e,t){fetch(Je+"/api/fuente/",{method:"DELETE",body:JSON.stringify(n),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){t(e)}))}))).then((function(e){a.listarFuentesAgua()})):(e=o,new Promise((function(t,a){fetch(Je+"/api/fuente/habilitar",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.listarFuentesAgua()}))}))},a.controlModalAgregar=function(){a.setState({mostrarVentanaAgregarModal:!a.state.mostrarVentanaAgregarModal})},a.controlModalEditar=function(){a.setState({mostrarVentanaEditarModal:!a.state.mostrarVentanaEditarModal})},a.agregarFuente=function(e){e.preventDefault();var t,n={denominacion:document.getElementById("nombreFuente").value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(Je+"/api/fuente/",{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.setState({mostrarVentanaAgregarModal:!1}),a.listarFuentesAgua()}))},a.redireccionar=function(e){a.props.history.push(e)},a.enviarModificacion=function(e){e.preventDefault();var t,n={codigo:a.state.indiceFuenteAguaSeleccionada,denominacion:document.getElementById("fuenteModificada").value,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(Je+"/api/fuente/",{method:"PUT",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.setState({mostrarVentanaEditarModal:!1}),a.listarFuentesAgua()}))},a.mostrarOcultarZonas=function(e){var t=document.getElementById("zInfo"+e);t.hidden=!0!==t.hidden},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listarFuentesAgua()}))},a.state={usuario:I(),fuentesAgua:[],zonasFuentes:[],paginaActual:1,fuenteAguaInicioPaginado:1,indiceFuenteAguaSeleccionada:0,denominacionFuenteAguaSeleccionada:"",mostrarVentanaAgregarModal:!1,mostrarVentanaEditarModal:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario.grupo>0&&this.setState({fuenteAguaInicioPaginado:15*(parseInt(this.state.paginaActual)-1)},(function(){e.listarFuentesAgua(),e.listarZonasFuente()}))}},{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement(H,{cantidadElementos:this.state.fuentesAgua.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"40%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar una Nueva Fuente de Agua",title:"Registrar/Agregar una Nueva Fuente de Agua",onClick:function(){return e.controlModalAgregar()}})),o.a.createElement("th",null," Denominaci\xf3n/Nombre",o.a.createElement("br",null),"Fuente de Agua"),o.a.createElement("th",null," Zonas "))),o.a.createElement("tbody",null,this.state.fuentesAgua.map((function(t,a){return o.a.createElement("tr",{key:a,className:"tabla_fila"},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("label",{className:"boton_habilitado"},o.a.createElement("input",{type:"checkbox",onChange:e.cambiarEstadoFuenteAgua,checked:1===parseInt(t.habilitado),"data-fuente":t.codigoFuente,value:1===parseInt(t.habilitado)?1:0,name:"chkBox"+t.codigoFuente,id:"chkBox"+t.codigoFuente,title:"Habilitar/Deshabilitar la Fuente de Agua"}),o.a.createElement("div",{className:"boton_deslizar redondo"}))),o.a.createElement("td",{onClick:function(){e.seleccionarFuenteAgua(t.codigoFuente,t.denominacionFuente)}},t.denominacionFuente.toUpperCase()||"\u2699",o.a.createElement("div",{style:{marginLeft:"6%"},id:"zInfo"+t.codigoFuente,hidden:!0},e.state.zonasFuentes.filter((function(e){return e.codigoFuente===parseInt(t.codigoFuente)})).map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("label",{style:{fontSize:"11pt"}},"Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)))})))),o.a.createElement("td",{style:{textAlign:"center",cursor:"pointer"}},o.a.createElement("img",{src:"/img/lupaVer.png",alt:"zona comercial coberturada",title:"Ver zonas comerciales coberturas",onClick:function(){return e.mostrarOcultarZonas(t.codigoFuente)}})))}))))),o.a.createElement("div",{className:"centrado"},this.state.fuentesAgua.length>0?null:o.a.createElement("div",{style:{width:"40%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaAgregarModal,controlModal:this.controlModalAgregar,tituloModal:"Registrar Fuente de Agua"},o.a.createElement("form",{noValidate:!0,onSubmit:this.agregarFuente,className:"una_columna"},o.a.createElement("label",{htmlFor:"nombreFuente"},"Denominaci\xf3n de la Fuente de Agua"),o.a.createElement("input",{className:"cuadro_dato",type:"text",required:!0,name:"nombreFuente",id:"nombreFuente",placeholder:"Denominaci\xf3n"}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Agregar ")))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaEditarModal,controlModal:this.controlModalEditar,tituloModal:"Modificar la denominaci\xf3n"},o.a.createElement("form",{noValidate:!0,onSubmit:this.enviarModificacion,className:"una_columna"},o.a.createElement("label",{htmlFor:"fuenteModificada"},"Nueva denominaci\xf3n de la Fuente de Agua"),o.a.createElement("input",{className:"cuadro_dato",type:"text",required:!0,name:"fuenteModificada",id:"fuenteModificada",placeholder:"Nombre de la fuente de agua",onChange:this.alterarDenominacionFuenteAgua,value:this.state.denominacionFuenteAguaSeleccionada}),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Actualizar"))))):o.a.createElement(U,null)}}]),t}(n.Component),Ge=M;var We=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).controlarVentanaModalAgregar=function(){a.setState({mostrarVentanaAgregarModal:!a.state.mostrarVentanaAgregarModal})},a.listarZonas=function(){Ze().then((function(e){a.setState({zonas:e})}))},a.listarZonaPorFuenteAgua=function(){a.setState({fuenteZonaInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e;(e={inicio:a.state.fuenteZonaInicioPaginado,resultados:15},new Promise((function(t,a){fetch(Ge+"/api/fuentezona/paginado/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){a.setState({zonasPorFuenteAgua:e})}))}))},a.listarFuentesDeAgua=function(){new Promise((function(e,t){fetch(Je+"/api/fuente").then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){a.setState({fuentesAgua:e})}))},a.agregarRelacionZonaFuente=function(){var e,t=document.getElementById("lFuentes"),n=document.getElementById("lZonas"),o={fuente:t.options[t.selectedIndex].value,zona:n.options[n.selectedIndex].value,firma:a.state.usuario.firmaDigital};(e=o,new Promise((function(t,a){fetch(Ge+"/api/fuentezona/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return t(e.json())})).catch((function(e){return a(e)}))}))).then((function(e){e[0].error?a.setState({alertaTexto:"Relaci\xf3n Existente",alertaColor:"danger"},(function(){setTimeout(a.setState.bind(Object(T.a)(a),{alertaTexto:"",alertaColor:""}),5e3)})):a.setState({mostrarVentanaAgregarModal:!1},(function(){return a.listarZonaPorFuenteAgua()}))}))},a.cambiarRelacionZonaFuenteAgua=function(e){var t,n={codigo:e.target.dataset.codigo,fuente:e.target.value,zona:e.target.dataset.zona,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(Ge+"/api/fuentezona/",{method:"PUT",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(t){return e(t.json())})).catch((function(e){return a(e)}))}))).then((function(e){e[0].error||a.listarZonaPorFuenteAgua()}))},a.eliminarRelacionFuenteZona=function(e){var t,n={fuente:e.target.dataset.fuente,zona:e.target.dataset.zona,firma:a.state.usuario.firmaDigital};(t=n,new Promise((function(e,a){fetch(Ge+"/api/fuentezona/",{method:"DELETE",body:JSON.stringify(t),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(t){e(t)})).catch((function(e){a(e)}))}))).then((function(e){a.listarZonaPorFuenteAgua()}))},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listarZonaPorFuenteAgua()}))},a.redireccionar=function(e){a.props.history.push(e)},a.componentDidMount=function(){a.state.usuario.grupo>0&&a.setState({fuenteZonaInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){a.listarZonas(),a.listarFuentesDeAgua(),a.listarZonaPorFuenteAgua()}))},a.state={usuario:I(),zonas:[],fuentesAgua:[],zonasPorFuenteAgua:[],paginaActual:1,fuenteZonaInicioPaginado:1,mostrarVentanaAgregarModal:!1,alertaTexto:"",alertaColor:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement(H,{cantidadElementos:this.state.zonasPorFuenteAgua.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"50%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar una Relaci\xf3n de Zona y Fuente",title:"Registrar/Agregar una Relaci\xf3n de Zona y Fuente",onClick:function(){return e.controlarVentanaModalAgregar()}})),o.a.createElement("th",null,"Fuente de Agua\xa0"),o.a.createElement("th",null,"Zona Comercial"))),o.a.createElement("tbody",null,this.state.zonasPorFuenteAgua.map((function(t,a){return o.a.createElement("tr",{key:a,className:"tabla_fila"},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("img",{src:"/img/borrarRegistro.png",onClick:e.eliminarRelacionFuenteZona,"data-fuente":t.codigoFuente,"data-zona":t.codigoZona,alt:"Eliminar Registro",title:"Elminar la relaci\xf3n entre una Fuente de Agua y una Zona Comercial"})),o.a.createElement("td",null,o.a.createElement("select",{className:"cuadro_dato",name:"fSel"+t.codigoFuente,id:"fSel"+t.codigoFuente,value:t.codigoFuente,onChange:e.cambiarRelacionZonaFuenteAgua,"data-zona":t.codigoZona,"data-codigo":t.codigoFuenteZona},e.state.fuentesAgua.map((function(e,t){return o.a.createElement("option",{key:t,value:e.codigoFuente},e.denominacionFuente)})))),o.a.createElement("td",null,"Zona \xa0"+h(t.sector)+(0===parseInt(t.subSector)?"":" \u2014 "+h(t.subSector))+("-"===t.microSector?"":" \u2014 "+t.microSector)))}))))),o.a.createElement("div",{className:"centrado"},this.state.zonasPorFuenteAgua.length>0?null:o.a.createElement("div",{style:{width:"50%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaAgregarModal,controlModal:this.controlarVentanaModalAgregar,tituloModal:"Registrar Fuente de Agua/Zona Comercial"},o.a.createElement("form",{noValidate:!0,onSubmit:this.agregarRelacionZonaFuente,className:"una_columna"},""!==this.state.alertaTexto?o.a.createElement("div",{color:this.state.alertaColor},this.state.alertaTexto," "):"",o.a.createElement("label",{htmlFor:"lFuentes"},"Fuentes de Agua"),o.a.createElement("select",{name:"lFuentes",id:"lFuentes",required:!0},o.a.createElement("option",{value:"0"},"Seleccione una FUENTE de AGUA"),this.state.fuentesAgua.map((function(e,t){return o.a.createElement("option",{key:t,value:e.codigoFuente},e.denominacionFuente)}))),o.a.createElement("label",{htmlFor:"lZonas"},"Zonas Comerciales"),o.a.createElement("select",{name:"lZonas",id:"lZonas",required:!0},o.a.createElement("option",{value:"0"},"Seleccione una ZONA COMERCIAL"),this.state.zonas.map((function(e,t){return o.a.createElement("option",{key:t,value:e.codigoZona},"Zona \xa0"+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))}))),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Agregar"))))):o.a.createElement(U,null)}}]),t}(n.Component),Ye={codigoZona:0,sector:0,subSector:0,microSector:"-",denominacionZona:"",esSector:0,tieneConexiones:0,habilitado:0},Ke=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){a.setState({zonaInicioPaginado:15*(parseInt(a.state.paginaActual)-1)},(function(){var e;(e={inicio:a.state.zonaInicioPaginado,resultados:15},new Promise((function(t,a){fetch(je+"/api/zona/paginado/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){a.setState({zonas:e})}))}))},a.modificarZona=function(){var e,t={zona:a.state.zonaSeleccion.codigoZona,sector:document.getElementById("sector").value,subsector:document.getElementById("subSector").value,microsector:document.getElementById("microSector").value,denominacion:document.getElementById("denominacionZona").value,esSector:document.getElementById("esSector").checked?1:0,tieneConexiones:document.getElementById("tieneConexiones").checked?1:0,quien:a.state.usuario.firmaDigital};"0"!==t.sector?(e=t,new Promise((function(t,a){fetch(je+"/api/zona/",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){e.error?alert("No se pudo guardar los datos"):(a.listarZonas(),a.controlarVentanaModal())})):alert("Ingrese un identificador de Sector")},a.agregarZona=function(){var e,t={sector:document.getElementById("sector").value,subsector:document.getElementById("subSector").value,microsector:document.getElementById("microSector").value,denominacion:document.getElementById("denominacionZona").value,esSector:document.getElementById("esSector").checked?1:0,tieneConexiones:document.getElementById("tieneConexiones").checked?1:0,quien:a.state.usuario.firmaDigital};"0"!==t.sector?(e=t,new Promise((function(t,a){fetch(je+"/api/zona/",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){e.error?alert("No se pudo registrar"):(a.listarZonas(),a.controlarVentanaModal())})):alert("Ingrese un identificador de Sector")},a.cambiarEstadoZona=function(e){var t=a.state.zonaSeleccion,n=e.target.checked;t.codigoZona=parseInt(e.target.dataset.zona),a.setState({zonaSeleccion:t},(function(){var e,t={zona:a.state.zonaSeleccion.codigoZona,firma:a.state.usuario.firmaDigital};n?function(e){return new Promise((function(t,a){fetch(je+"/api/zona/habilitar",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))}(t).then((function(e){return a.listarZonas()})):(e=t,new Promise((function(t,a){fetch(je+"/api/zona/deshabilitar",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){return a.listarZonas()}))}))},a.cambiarSiEsSector=function(e){var t=a.state.zonaSeleccion,n=e.target.checked;t.codigoZona=parseInt(e.target.dataset.zona),a.setState({zonaSeleccion:t},(function(){var e,t={zona:a.state.zonaSeleccion.codigoZona,firma:a.state.usuario.firmaDigital};n?function(e){return new Promise((function(t,a){fetch(je+"/api/zona/sector",{method:"PUT",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))}(t).then((function(e){return a.listarZonas()})):(e=t,new Promise((function(t,a){fetch(je+"/api/zona/sector",{method:"DELETE",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){return e})).then((function(e){t(e)})).catch((function(e){a(e)}))}))).then((function(e){return a.listarZonas()}))}))},a.seleccionarEditarDenominacionZona=function(e){a.setState({zonaSeleccion:e,mostrarVentanaModal:!0})},a.registrarZona=function(e){e.preventDefault(),a.state.zonaSeleccion.codigoZona>0?a.modificarZona():a.agregarZona()},a.controlarVentanaModal=function(){a.state.mostrarVentanaModal&&a.setState({zonaSeleccion:Ye}),a.setState({mostrarVentanaModal:!a.state.mostrarVentanaModal})},a.cambiarPagina=function(e){(e=parseInt(e)>0?parseInt(e):parseInt(e.target.value)||"")<=40&&a.setState({paginaActual:e},(function(){return a.listarZonas()}))},a.state={usuario:I(),zonaSeleccion:Ye,zonas:[],paginaActual:1,zonaInicioPaginado:1,mostrarVentanaModal:!1,anchoModal:0,altoModal:0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.usuario.grupo>0&&this.setState({zonaInicioPaginado:15*(parseInt(this.state.paginaActual)-1)},(function(){e.listarZonas()}))}},{key:"render",value:function(){var e=this;if(this.state.usuario.grupo>0){var t=new Array(30).fill(1).map((function(e,t){return t+1})).map((function(e){return o.a.createElement("option",{key:e,value:e},h(e))}));return o.a.createElement("div",{className:"contenedor"},o.a.createElement(H,{cantidadElementos:this.state.zonas.length,cambiarPagina:this.cambiarPagina,paginaActual:this.state.paginaActual}),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{style:{width:"70%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("img",{src:"/img/agregarRegistro.png",alt:"Registrar/Agregar una Nueva Zona",title:"Registrar/Agregar una Nueva Zona",onClick:function(){return e.controlarVentanaModal()}})),o.a.createElement("th",null,"Zona Comercial"),o.a.createElement("th",null,"\xc1rea de Servicio"),o.a.createElement("th",null,"Sector"))),o.a.createElement("tbody",null,this.state.zonas.map((function(t){return o.a.createElement("tr",{key:t.codigoZona,className:"tabla_fila"},o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("label",{className:"boton_habilitado"},o.a.createElement("input",{onChange:e.cambiarEstadoZona,checked:1===parseInt(t.habilitado),value:1===parseInt(t.habilitado)?1:0,"data-zona":t.codigoZona,name:"chkBox"+t.codigoZona,id:"chkBox"+t.codigoZona,title:"Habilitar/Deshabilitar la Zona Comercial",type:"checkbox"}),o.a.createElement("div",{className:"boton_deslizar redondo"}))),o.a.createElement("td",{onClick:function(){return e.seleccionarEditarDenominacionZona(t)}},"Zona \xa0"+h(t.sector)+(0===parseInt(t.subSector)?"":" \u2014 "+h(t.subSector))+("-"===t.microSector?"":" \u2014 "+t.microSector)),o.a.createElement("td",{onClick:function(){return e.seleccionarEditarDenominacionZona(t)}},t.denominacionZona||"\u2699"),o.a.createElement("td",{style:{textAlign:"center"}},o.a.createElement("input",{type:"checkbox",onChange:e.cambiarSiEsSector,checked:1===parseInt(t.esSector),value:1===parseInt(t.esSector)?1:0,"data-zona":t.codigoZona,name:"chkSS"+t.codigoZona,id:"chkSS"+t.codigoZona,title:"Habilitar/Deshabilitar Si la Zona Comercial debe SER un SECTOR"})))}))))),o.a.createElement("div",{className:"centrado"},this.state.zonas.length>0?null:o.a.createElement("div",{style:{width:"70%"}},o.a.createElement(L,{tipoCuadro:"basico"},"No EXISTEN datos para mostrar"))),o.a.createElement(J,{mostrarModal:this.state.mostrarVentanaModal,controlModal:this.controlarVentanaModal,tituloModal:"Datos de Zona Comercial"},o.a.createElement("form",{noValidate:!0,onSubmit:this.registrarZona,className:"una_columna"},o.a.createElement("label",{htmlFor:"zona"},"Datos de Sector","\xa0"),o.a.createElement("div",{htmlFor:"zona"},o.a.createElement("select",{className:"cuadro_dato",required:!0,name:"sector",id:"sector",defaultValue:this.state.zonaSeleccion.sector},o.a.createElement("option",{value:"0"},"Sector"),t),"\xa0","\u2014","\xa0",o.a.createElement("select",{className:"cuadro_dato",name:"subSector",id:"subSector",defaultValue:this.state.zonaSeleccion.subSector},o.a.createElement("option",{value:"0"},"Sub-Sector"),t),"\xa0","\u2014","\xa0",o.a.createElement("select",{className:"cuadro_dato",name:"microSector",id:"microSector",defaultValue:this.state.zonaSeleccion.microSector},o.a.createElement("option",{value:"-"},"Micro-Sector"),o.a.createElement("option",{value:"A"},"A"),o.a.createElement("option",{value:"B"},"B"),o.a.createElement("option",{value:"C"},"C"),o.a.createElement("option",{value:"D"},"D"),o.a.createElement("option",{value:"E"},"E"))),o.a.createElement("label",{htmlFor:"esSector"},"Comportarse como un SECTOR \xa0",o.a.createElement("input",{type:"checkbox",name:"esSector",id:"esSector",defaultChecked:this.state.zonaSeleccion.esSector||0})),o.a.createElement("label",{htmlFor:"tieneConexiones"},"Habilitar para registrar Conexiones \xa0",o.a.createElement("input",{type:"checkbox",name:"tieneConexiones",id:"tieneConexiones",defaultChecked:this.state.zonaSeleccion.tieneConexiones||0})),o.a.createElement("label",{htmlFor:"denominacionZona"},"Nombre/Denominaci\xf3n de Zona Comercial"),o.a.createElement("input",{className:"cuadro_dato",type:"text",name:"denominacionZona",id:"denominacionZona",maxLength:"50",placeholder:"Nombre de la Zona Comercial",defaultValue:this.state.zonaSeleccion.denominacionZona}),o.a.createElement("div",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_verde",type:"submit"},"Registrar")))))}return o.a.createElement(U,null)}}]),t}(n.Component),Qe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return I().grupo>0?o.a.createElement("div",{className:"centrado"},o.a.createElement("img",{style:{width:"80%"},src:"/img/provCusco.jpg",alt:"Cusco"})):o.a.createElement(U,null)}}]),t}(n.Component),$e=a(24),et=a.n($e),tt=function(e){e&&function(e,t){var a=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click()}(e.contenido,e.nombreArchivo+"-"+f()+".txt")},at=function(e){var t=e.titulo,a=e.mensaje,n=e.mostrarDescargaArchivo,r=e.controlDescargaArchivo,i=e.documento,c=e.tipoReporte;return n?o.a.createElement(J,{mostrarModal:n,controlModal:r,tituloModal:t||"Tipo de Descagar del Archivo"},o.a.createElement("div",{className:"una_columna"},o.a.createElement("div",{className:"centrado"},a),o.a.createElement("div",{className:"8"!==c?"dos_columnas":"tres_columnas"},o.a.createElement("div",{className:"centrado"},o.a.createElement("img",{style:{cursor:"pointer"},src:"/img/pdf.png",alt:"Descargar Archivo Pdf",title:"Descargar Archivo Pdf",onClick:function(){return function(e){var t=document.getElementById(e.idTabla);e&&N("".concat(t.outerHTML),e.orientacion,e.nombreArchivo+"-"+f()+".pdf")}(i)}})),o.a.createElement("div",{className:"centrado"},o.a.createElement(et.a,{className:"boton_excel_descarga",table:i.idTabla,filename:i.nombreArchivo,sheet:"hoja 1",buttonText:" "}),o.a.createElement("img",{src:"/img/excel.png",alt:"Descargar Archivo Excel",title:"Descargar Archivo Excel"})),o.a.createElement("div",{hidden:"8"!==c},o.a.createElement("div",{className:"centrado"},o.a.createElement("img",{style:{cursor:"pointer"},src:"/img/txt.png",alt:"Descargar Archivo Txt",title:"Descargar Archivo Txt",onClick:function(){return tt(i)}})))),o.a.createElement("div",{className:"centrado"},o.a.createElement("button",{className:"boton boton_rojo",onClick:function(){return r()}},"Cancelar")))):null},nt=function(e){var t=e.mostrarReporte,a=e.actividadContinuidades,n=e.zonas,r=e.tiposAltitud,i=e.zonaReporte,c=e.altitudReporte,l=e.tipoReporteContinuidad;return t&&"1"===l?o.a.createElement("div",{id:"reporteContinuidadEncuesta"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteContinuidadEncuesta"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Zona\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Urbanizaci\xf3n - Calle\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Ma\xf1anas",o.a.createElement("br",null),"DE\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Ma\xf1anas",o.a.createElement("br",null),"A\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Tardes",o.a.createElement("br",null),"DE\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Tardes",o.a.createElement("br",null),"A\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Total\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Promedio",o.a.createElement("br",null),"Ponderado\xa0"))),n.filter((function(e){return"%"===i?e.esSector:e.esSector&&e.codigoZona.toString()===i})).map((function(e){var t=a.filter((function(t){return t.codigoZonaReporte===e.codigoZona})).length;return t>0?o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:t+4,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),r.filter((function(e){return"%"===c?0!==x(e):x(e).toString()===c})).map((function(t){var n=x(t),r=a.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===n})).length;return r>0?o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+t},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:r+1,style:{border:"1px solid black",textAlign:"center"}},"\xa0",t)),a.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===n})).map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"left",paddingLeft:"8px"}},e.denominacionLote),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.r1HoraDe),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.r1HoraA),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.r2HoraDe),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.r2HoraA),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.horaServicio),t<1?o.a.createElement("td",{rowSpan:r,style:{border:"1px solid black",textAlign:"center"}},(e.promedioHora||"00:00").substring(0,5)):null)}))):null}))):null}))))):null},ot=function(e){var t=e.mostrarReporte,a=e.promedioPonderados,n=e.zonas,r=e.tiposAltitud,i=e.zonaReporte,c=e.altitudReporte,l=e.tipoReporteContinuidad;if(t&&"2"===l){var s=0,d=0;return o.a.createElement("div",{id:"reporteContinuidadPonderado"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteContinuidadPonderado"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Zona\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0prom\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Hora\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Minuto\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Representa\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONT. PROM\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEX. ACT.\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"PRODUCTO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CONT POND. ",o.a.createElement("br",null),"SECTOR \xa0"))),n.filter((function(e){return"%"===i?e.esSector:e.esSector&&e.codigoZona.toString()===i})).map((function(e){var t=0,n=0;return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:5,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),r.filter((function(e){return"%"===c?0!==x(e):x(e).toString()===c})).map((function(r,i){var c=x(r);return o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+r},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0",r),a.filter((function(t){return t.codigoZona===e.codigoZona&&t.tipoAltitud===c})).map((function(a){return t+=a.conexionesActivas,s+=a.conexionesActivas,n+=a.producto,d+=a.producto,o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+c},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(a.promedioHora||"-").substring(0,5)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.hora||"-"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.minuto||"-"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.representa||"-"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.contProm||"-"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.conexionesActivas||"-"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.producto||"-"),o.a.createElement("td",{style:{borderRight:"1px solid black"}},"\xa0"))}))))})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:6,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(t||0).toFixed(0)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(n||0).toFixed(4)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(n/t||0).toFixed(2))))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:7,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO PONDERADO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},s.toFixed(0)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},d.toFixed(5)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:9,style:{border:"1px solid black",textAlign:"center"}},"CONTINUIDAD PROMEDIO PONDERADO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(d/s).toFixed(4))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:9,style:{border:"1px solid black",textAlign:"center"}},"INDICE DE CUMPLIMIENTO INDIVIDUAL (ICI) CONTINUIDAD"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(d/s/20*100).toFixed(0)))))))}return null},rt=function(e){var t=e.mostrarReporte,a=e.promedioPonderados,n=e.zonas,r=e.zonaReporte,i=e.tipoReporteContinuidad;if(t&&"3"===i){var c=0,l=0,s=0;return o.a.createElement("div",{id:"reporteContinuidadServicio"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteContinuidadServicio"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0SEG\xdaN PROCESO OPRATIVO\xa0")),o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0AREA DE SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0NUMERO DE",o.a.createElement("br",null),"CONEXIONES\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0HORAS\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PESO(1)",o.a.createElement("br",null)," PONDERADO\xa0"))),n.filter((function(e){return"%"===r?e.esSector:e.esSector&&e.codigoZona.toString()===r})).map((function(e){var t,n=0,r=0,i=0;return a.map((function(t){return e.codigoZona===t.codigoZona&&(n+=t.conexionesActivas,c+=t.conexionesActivas,r+=t.producto),0})),i="NaN"===(i=parseFloat(r/n).toFixed(2))?0:i,t=parseFloat(i*n).toFixed(2),l+=parseFloat(t),s=l/c,o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black"}}," ",e.denominacionZona," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",n," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",i," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",t," ")))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},c),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},l.toFixed())),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0 ")),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"CONTINUIDAD")),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO GENERAL"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},s.toFixed(2)," \xa0 (Horas)")),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO GENERAL"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},v(s,"hh:mm:ss")," \xa0 (Hr:Min:Seg)"))))),o.a.createElement("br",null))}return null},it=function(e){var t=e.mostrarReporte,a=e.tipoReporteContinuidad,n=e.actividadContinuidades,r=e.promedioPonderados,i=e.zonas,c=e.tiposAltitud,l=e.zonaReporte,s=e.altitudReporte;if(t&&"4"===a){var d=0,u=0,m=0;return o.a.createElement("div",{id:"reporteContinuidadMenor6Hrs"},o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{id:"tablaReporteContinuidadMenor6Hrs"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Zona\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Urbanizaci\xf3n - Calle\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Horas",o.a.createElement("br",null),"Servicio"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CANT."),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones",o.a.createElement("br",null),"Activas"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones",o.a.createElement("br",null),"Menor 6 Hrs"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Continuidad",o.a.createElement("br",null),"Menor 6 Hrs"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CONTx CONEX"))),i.filter((function(e){return"%"===l?e.esSector:e.esSector&&e.codigoZona.toString()===l})).map((function(e){var t=n.filter((function(t){return t.codigoZonaReporte===e.codigoZona})).length,a=0,i=0,l=0;return t>0?o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:t+4,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),c.filter((function(e){return"%"===s?0!==x(e):x(e).toString()===s})).map((function(t){var c=0,s=0,p=0,g=x(t),b=n.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===g})).length;return r.filter((function(t){return t.codigoZona===e.codigoZona&&t.tipoAltitud===g})).forEach((function(e){return a=e.conexionesActivas})),d+=a,b>0?o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+t},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:b+1,style:{border:"1px solid black",textAlign:"center"}},"\xa0",t)),n.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===g})).forEach((function(e){var t=parseInt(e.horaServicio.substring(0,2))+parseInt((100*e.horaServicio.substring(3,5)/60).toFixed(2))/100;0!==(i=a/b*(s=(l=t<6?1:0)+s))&&(c+=1===l?t:0),p=(c/s||0).toFixed(2)})),n.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===g})).map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"left",paddingLeft:"8px"}},e.denominacionLote),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.horaServicio),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},l),t<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",a," "):null,t<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",i.toFixed(2)," "):null,t<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",v(p,"hh:mm")," "):null,t<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",(p/24*i).toFixed(2)," "):null)})),function(e,t){m+=e/24*t,u+=t}(p,i)):null}))):null})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"SUMATORIA"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},d),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},u.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},m.toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Continuidad Promedio Menor a 6 Horas"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},v(m/u*24,"hh:mm"))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Porcentaje de Usuarios con Continuidad menor a 6 Horas"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},(u/d*100).toFixed(2)," %"))))))}return null},ct=function(e){var t=e.mostrarReporte,a=e.tipoReporteContinuidad,n=e.actividadContinuidades,r=e.promedioPonderados,i=e.zonas,c=e.tiposAltitud,l=e.zonaReporte,s=e.altitudReporte,d=0,u=0,m=0;return t&&"6"===a?o.a.createElement("div",{id:"reporteContinuidadMenor18Hrs"},o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{id:"tablaReporteContinuidadMenor18Hrs"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Zona\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Urbanizaci\xf3n - Calle\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Horas",o.a.createElement("br",null),"Servicio"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CANT."),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones",o.a.createElement("br",null),"Activas"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones",o.a.createElement("br",null),"Menor 18 Hrs"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Continuidad",o.a.createElement("br",null),"Menor 18 Hrs"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CONTx CONEX"))),(i||[]).filter((function(e){return"%"===l?e.esSector:e.esSector&&e.codigoZona.toString()===l})).map((function(e){var t=0,a=0,i=0,l=(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona})).length;return l>0?o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:l+4,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),(c||[]).filter((function(e){return"%"===s?0!==x(e):x(e).toString()===s})).map((function(c){var l=0,s=0,p=0,g=x(c),b=n.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===g})).length;return(r||[]).filter((function(t){return t.codigoZona===e.codigoZona&&t.tipoAltitud===g})).forEach((function(e){return t=e.conexionesActivas})),d+=t,b>0?o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+c},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:b+1,style:{border:"1px solid black",textAlign:"center"}},"\xa0",c)),(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===g})).forEach((function(e){var n=parseInt(e.horaServicio.substring(0,2))+parseInt((100*e.horaServicio.substring(3,5)/60).toFixed(2))/100;i=t/b*(s=(a=n<18?1:0)+s),p=(l/s||0).toFixed(2),0!==i&&(l+=1===a?n:0)})),(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===g})).map((function(e,n){return o.a.createElement("tr",{key:n},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"left",paddingLeft:"8px"}},e.denominacionLote),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.horaServicio),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a),n<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",t," "):null,n<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",i.toFixed(2)," "):null,n<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",v(p,"hh:mm")," "):null,n<1?o.a.createElement("td",{rowSpan:b,style:{border:"1px solid black",textAlign:"center"}}," ",(p/24*i).toFixed(2)," "):null)})),function(e,t){m+=e/24*t,u+=t}(p,i)):null}))):null})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"SUMATORIA"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},d),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},u.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},m.toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Continuidad Promedio Menor a 6 Horas"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},v(m/u*24,"hh:mm"))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Porcentaje de Usuarios con Continuidad menor a 6 Horas"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},(u/d*100).toFixed(2)," %")))))):null},lt=function(e){var t=e.mostrarReporte,a=e.tipoReporteContinuidad,n=e.zonas,r=e.zonaReporte;return t&&"5"===a?o.a.createElement("div",{id:"reporteResumenContinuidad6Hrs"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteResumenContinuidad6Hrs"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0SECTORES DE DISTRIBUCI\xd3N CON CONTINUIDAD MENOR A 06 HRS\xa0")),o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0AREA DE SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PROMEDIO HORAS",o.a.createElement("br",null),"Servicio\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEXIONES CON SERVICIO",o.a.createElement("br",null),"MENOR A 6Hrs\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0POBLACION\xa0"))),n.filter((function(e){return"%"===r?e.esSector:e.esSector&&e.codigoZona.toString()===r})).map((function(e){return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black"}}," ",e.denominacionZona," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 04:46 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 1302 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 7436 ")))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"TOTAL"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"4961"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"28325")),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3,style:{border:"1px solid black",textAlign:"center"}},"TOTAL USUARIOS"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"86135")),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3,style:{border:"1px solid black",textAlign:"center"}},"Porcentaje de Usuarios con Continuidad menor a 6 horas"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"5.76%"))))),o.a.createElement("br",null)):null},st=function(e){var t=e.mostrarReporte,a=e.tipoReporteContinuidad,n=e.zonas,r=e.zonaReporte;return t&&"7"===a?o.a.createElement("div",{id:"reporteResumenContinuidad18Hrs"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteResumenContinuidad18Hrs"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0SECTORES DE DISTRIBUCI\xd3N CON CONTINUIDAD MENOR A 06 HRS\xa0")),o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0AREA DE SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PROMEDIO HORAS",o.a.createElement("br",null),"Servicio\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEXIONES CON SERVICIO",o.a.createElement("br",null),"MENOR A 6Hrs\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0POBLACION\xa0"))),n.filter((function(e){return"%"===r?e.esSector:e.esSector&&e.codigoZona.toString()===r})).map((function(e){return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black"}}," ",e.denominacionZona," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 04:46 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 1302 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 7436 ")))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"TOTAL"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"4961"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"28325")),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3,style:{border:"1px solid black",textAlign:"center"}},"TOTAL USUARIOS"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"86135")),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3,style:{border:"1px solid black",textAlign:"center"}},"Porcentaje de Usuarios con Continuidad menor a 6 horas"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"5.76%"))))),o.a.createElement("br",null)):null},dt=function(e){var t=e.mostrarReporte,a=e.tipoReporteContinuidad,n=e.zonas;e.zonaReporte;return t&&"8"===a?o.a.createElement("div",{id:"reporteResumenContinuidad"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteResumenContinuidad"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0DESCRIPCI\xd3N ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0SECTOR\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CODF\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0FUENTE\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEX\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0HORA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ESTADO\xa0"))),n.filter((function(e){return e.tieneConexiones})).map((function(e){return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 1 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 1 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," KORKOR "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 1109 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 06:40 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 1 ")))})))),o.a.createElement("br",null)):null},ut=M+"/reporte/";var mt=parseInt((new Date).getMonth())+1,pt=parseInt((new Date).getFullYear()),gt={usuario:I(),actividadContinuidades:[],promedioPonderados:[],zonas:[],zonaReporte:"%",urbanoReporte:"%",altitudReporte:"%",mesReporte:mt,agnoReporte:pt,agnos:[2018,2019,2020,2021,2022,2023,2024,2025,2026],mesesAgno:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],tiposAltitud:["Alta","Media","Baja","Sin Especificar"],cantidadZonas:0,cantidadPuntosMedidos:0,cantidadPuntosRegistrados:0,tipoReporteContinuidad:"1",tituloReporteContinuidad:["REPORTE NO ENCONTRADO","ENCUESTA DE CONTINUIDAD DEL SERVICIO POR ZONA DE ABASTECIMIENTO","CONTINUIDAD PROMEDIO PONDERADO","CONTINUIDAD DE HORAS DE SERVICIO","CONTINUIDAD MENOR A 6 HORAS","RESUMEN CONTINUIDAD MENOR A 6 HORAS","CONTINUIDAD MENOR A 18 HORAS","RESUMEN CONTINUIDAD MENOR A 18 HORAS","RESUMEN CONTINUIDAD"],documento:{nombreArchivo:"",contenido:"",orientacion:"",idTabla:""},mostrarReporte:!1,mostrarDescargaArchivo:!1},bt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){Ze().then((function(e){return a.setState({zonas:e})}))},a.mostrarReporte=function(){a.setState({mostrarReporte:!a.state.mostrarReporte})},a.mostrarDescargaArchivo=function(){a.generarInformacionDocumento(a.state.actividadContinuidades),a.setState({mostrarDescargaArchivo:!a.state.mostrarDescargaArchivo})},a.cambiarMesReporte=function(e){a.setState({mesReporte:e.target.value,mostrarReporte:!1},(function(){return a.reporteContinuidad()}))},a.cambiarAgnoReporte=function(e){a.setState({agnoReporte:e.target.value,mostrarReporte:!1},(function(){return a.reporteContinuidad()}))},a.cambiarZonaReporte=function(e){a.setState({zonaReporte:e.target.value,mostrarReporte:!1},(function(){return a.reporteContinuidad()}))},a.cambiarAltitudReporte=function(e){a.setState({altitudReporte:e.target.value,mostrarReporte:!1},(function(){return a.reporteContinuidad()}))},a.cambiarTipoReporte=function(e){a.setState({tipoReporteContinuidad:e.target.value,mostrarReporte:!1})},a.reporteContinuidad=function(){var e,t={codigoZona:a.state.zonaReporte,codigoUrbano:a.state.urbanoReporte,tipoAltitud:a.state.altitudReporte,mesPeriodo:a.state.mesReporte,agnoPeriodo:a.state.agnoReporte};(e=t,new Promise((function(t,a){fetch(ut+"continuidad",{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){t(e.json())})).catch((function(e){a(e)}))}))).then((function(e){a.setState({cantidadPuntosRegistrados:e.length,cantidadPuntosMedidos:a.verificarRegistrosCompletos(e)}),a.generarReporte(e)}))},a.verificarRegistrosCompletos=function(e){var t=0;return e.map((function(e){return"sin datos"===e.codigoContinuidad&&(t+=1),0})),e.length-t},a.generarReporte=function(e){var t=0,n=[],o=[];a.state.zonas.filter((function(e){return"%"===a.state.zonaReporte?e.esSector:e.esSector&&e.codigoZona.toString()===a.state.zonaReporte})).map((function(r){return t+=1,a.state.tiposAltitud.filter((function(e){return"%"===a.state.altitudReporte?0!==x(e):x(e).toString()===a.state.altitudReporte})).map((function(t){var i,c=x(t),l={codigoZona:r.codigoZona,codigoUrbano:"%",tipoAltitud:c,mesPeriodo:a.state.mesReporte,agnoPeriodo:a.state.agnoReporte};return(i=l,new Promise((function(e,t){fetch(Pe+"/promediohora",{method:"POST",body:JSON.stringify(i),headers:new Headers({"Content-type":"application/json"})}).then((function(t){e(t.json())})).catch((function(e){t(e)}))}))).then((function(t){a.state.zonas.map((function(o){1===r.sector?o.sector===r.sector&&o.subSector===r.subSector&&a.insertarPonderado(e,o.codigoZona,r.codigoZona,c,t.promedioHora).forEach((function(e){n.push(e)})):o.sector===r.sector&&a.insertarPonderado(e,o.codigoZona,r.codigoZona,c,t.promedioHora).forEach((function(e){n.push(e)}));return 0})),(t=a.calcularPromedios(t)).codigoZona=r.codigoZona,t.tipoAltitud=c,o.push(t)})),0})),0})),a.setState({actividadContinuidades:n,promedioPonderados:o,cantidadZonas:t})},a.calcularPromedios=function(e){var t=parseFloat((e.promedioHora||"00:00").substring(0,2)),a=parseFloat((e.promedioHora||"00:00").substring(3,5)),n=parseFloat((a/60).toFixed(2)),o=t+n,r=parseFloat((o*e.conexionesActivas).toFixed(6));return e.hora=t,e.minuto=a,e.representa=n,e.contProm=o,e.producto=r,e},a.insertarPonderado=function(e,t,a,n,o){var r=[];return e.map((function(e){return e.codigoZona===t&&e.tipoAltitud===n&&(e.promedioHora=o,e.codigoZonaReporte=a,r.push(e)),0})),r},a.generarInformacionDocumento=function(e){var t=a.state.documento;switch(a.state.tipoReporteContinuidad){case"1":t.nombreArchivo="ReporteContinuidadEncuesta",t.idTabla="tablaReporteContinuidadEncuesta",t.contenido="Zona;Altitud;Urbanizaci\xf3n-Calle;Ma\xf1anasDe;Ma\xf1anasA;TardesDe;TardesA;Total;PromedioPonderado\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"2":t.nombreArchivo="ReporteContinuidadPonderado",t.idTabla="tablaReporteContinuidadPonderado",t.contenido="Zona;Altitud;Prom;Hora;Minuto;Representa;Cont. Prom.;Conex. Act.;Producto;Cont Pond\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"3":t.nombreArchivo="ReporteContinuidadServicio",t.idTabla="tablaReporteContinuidadServicio",t.contenido="Zona;Area De Servicio;Numero De Conexiones;Horas;Peso(1)Ponderado\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"4":t.nombreArchivo="ReporteContinuidadMenor6Hrs",t.idTabla="tablaReporteContinuidadMenor6Hrs",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"5":t.nombreArchivo="ReporteContinuidadResumen6Hrs",t.idTabla="tablaReporteResumenContinuidadReporte6Hrs",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"6":t.nombreArchivo="ReporteContinuidadMenor18Hrs",t.idTabla="tablaReporteContinuidadMenor18Hrs",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"7":t.nombreArchivo="ReporteContinuidadResumen18Hrs",t.idTabla="tablaReporteResumenContinuidad",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}));break;case"8":t.nombreArchivo="ReporteContinuidadResumen",t.idTabla="tablaReporteResumenContinuidad",t.contenido="N\xb0;DENOMINACION_ZONA;SECTOR;CODF;FUENTE;CONEX;HORA;ESTADO\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoContinuidad+";"+e.tipoAltitud+"\n"}))}a.setState({documento:t})},a.state=gt,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario.grupo>0&&(this.listarZonas(),this.reporteContinuidad())}},{key:"render",value:function(){return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"buscador_actividad_reporte"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",null,o.a.createElement("select",{className:"cuadro_dato",value:this.state.mesReporte,onChange:this.cambiarMesReporte},this.state.mesesAgno.map((function(e,t){return o.a.createElement("option",{key:t,value:t+1}," ",e," ")}))),"\xa0 \u2014 \xa0",o.a.createElement("select",{className:"cuadro_dato",value:this.state.agnoReporte,onChange:this.cambiarAgnoReporte},this.state.agnos.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)}))))),o.a.createElement("select",{hidden:!0,className:"cuadro_dato",onChange:this.cambiarZonaReporte},o.a.createElement("option",{value:"%"},"Zonas (TODO)"),this.state.zonas.filter((function(e){return e.esSector})).map((function(e){return o.a.createElement("option",{key:e.codigoZona,value:e.codigoZona},e.denominacionZona+"( Zona  "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)+" )")}))),o.a.createElement("select",{hidden:!0,className:"cuadro_dato",onChange:this.cambiarAltitudReporte},o.a.createElement("option",{value:"%"},"Altitud (TODO)"),this.state.tiposAltitud.filter((function(e){return 0!==x(e)})).map((function(e){return o.a.createElement("option",{key:e,value:x(e)},e)}))),o.a.createElement("select",{className:"cuadro_dato",value:this.state.tipoReporteContinuidad,onChange:this.cambiarTipoReporte},o.a.createElement("option",{value:"1"},"Encuesta de Continuidad del Servicio"),o.a.createElement("option",{value:"2"},"Continuidad Promedio Ponderado"),o.a.createElement("option",{value:"3"},"Continuidad de Horas de Servicio"),o.a.createElement("option",{value:"4"},"Continuidad menor a 6 Hrs"),o.a.createElement("option",{value:"5"},"Resumen Continuidad menor a 6 Hrs"),o.a.createElement("option",{value:"6"},"Continuidad menor a 18 Hrs"),o.a.createElement("option",{value:"7"},"Resumen Continuidad menor a 18 Hrs"),o.a.createElement("option",{value:"8"},"Resumen Comercial de Continuidad")))),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"cuadro_mensaje informacion"},o.a.createElement("div",null,o.a.createElement("b",null,"Resumen de Reporte")),o.a.createElement("hr",null),o.a.createElement("p",null,"Zonas: ",this.state.cantidadZonas),o.a.createElement("p",null,"Puntos Registrados: ",this.state.cantidadPuntosRegistrados),o.a.createElement("p",null,"Puntos Medidos: ",this.state.cantidadPuntosMedidos),o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{hidden:this.state.cantidadPuntosRegistrados<1,className:"dos_columnas"},o.a.createElement("button",{className:"boton boton_verde",onClick:this.mostrarReporte},"Generar",o.a.createElement("br",null),"Reporte"),o.a.createElement("button",{className:"boton "+(this.state.mostrarReporte?"boton_verde":"boton_rojo"),onClick:this.mostrarDescargaArchivo,disabled:!this.state.mostrarReporte},"Descargar",o.a.createElement("br",null),"Reporte"))))),o.a.createElement("hr",null),o.a.createElement("h2",{style:{textAlign:"center"}},this.state.tituloReporteContinuidad[this.state.tipoReporteContinuidad],o.a.createElement("br",null),this.state.mesesAgno[this.state.mesReporte-1],", ",this.state.agnoReporte),o.a.createElement(nt,{mostrarReporte:this.state.mostrarReporte,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,actividadContinuidades:this.state.actividadContinuidades,tipoReporteContinuidad:this.state.tipoReporteContinuidad}),o.a.createElement(ot,{mostrarReporte:this.state.mostrarReporte,promedioPonderados:this.state.promedioPonderados,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad}),o.a.createElement(rt,{mostrarReporte:this.state.mostrarReporte,promedioPonderados:this.state.promedioPonderados,zonas:this.state.zonas,zonaReporte:this.state.zonaReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad}),o.a.createElement(it,{mostrarReporte:this.state.mostrarReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad,promedioPonderados:this.state.promedioPonderados,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,actividadContinuidades:this.state.actividadContinuidades}),o.a.createElement(lt,{mostrarReporte:this.state.mostrarReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad,zonas:this.state.zonas,zonaReporte:this.state.zonaReporte}),o.a.createElement(ct,{mostrarReporte:this.state.mostrarReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad,promedioPonderados:this.state.promedioPonderados,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,actividadContinuidades:this.state.actividadContinuidades}),o.a.createElement(st,{mostrarReporte:this.state.mostrarReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad,zonas:this.state.zonas,zonaReporte:this.state.zonaReporte}),o.a.createElement(dt,{mostrarReporte:this.state.mostrarReporte,tipoReporteContinuidad:this.state.tipoReporteContinuidad,zonas:this.state.zonas}),o.a.createElement(at,{titulo:"",mensaje:"Escoja el tipo de Documento que se Descargara",mostrarDescargaArchivo:this.state.mostrarDescargaArchivo,controlDescargaArchivo:this.mostrarDescargaArchivo,documento:this.state.documento,tipoReporte:this.state.tipoReporteContinuidad})):o.a.createElement(U,null)}}]),t}(n.Component),Et=function(e){var t=e.mostrarReporte,a=e.actividadPresiones,n=e.zonas,r=e.tiposAltitud,i=e.zonaReporte,c=e.altitudReporte,l=e.tipoReportePresion;return t&&"1"===l?o.a.createElement("div",{id:"reportePresionEncuesta"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReportePresionEncuesta"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Zona\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Urbanizaci\xf3n - Calle\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Presi\xf3n",o.a.createElement("br",null),"A.Arriba\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Presi\xf3n",o.a.createElement("br",null),"A.Abajo\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PRESION\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0H=RED\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PRES. EN",o.a.createElement("br",null),"MCA\xa0"))),n.filter((function(e){return"%"===i?e.esSector:e.esSector&&e.codigoZona.toString()===i})).map((function(e){var t=a.filter((function(t){return t.codigoZonaReporte===e.codigoZona})).length;return t>0?o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:t+7,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),r.filter((function(e){return"%"===c?0!==x(e):x(e).toString()===c})).map((function(t){var n=x(t),r=0,i=0,c=a.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===n})).length;return c>0?o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+t},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:c+2,style:{border:"1px solid black",textAlign:"center"}},"\xa0",t)),a.filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===n})).map((function(e,t){return r=r+.703*e.lecturaAbajo+1,i+=1,o.a.createElement("tr",{key:t},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"left",paddingLeft:"8px"}},e.denominacionLote),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},parseFloat(e.lecturaArriba)||0),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},parseFloat(e.lecturaAbajo)||0),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},parseFloat(e.lecturaAbajo)||0),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},1),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(e.promedioPresion||0).toFixed(2)))})),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0",o.a.createElement("b",null,"PROMEDIO PARTE ",t.toUpperCase()),"\xa0"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0",(r/i).toFixed(2),"\xa0"))):null}))):null}))))):null},ht=function(e){var t=e.mostrarReporte,a=e.promedioPresiones,n=e.zonas,r=e.tiposAltitud,i=e.zonaReporte,c=e.altitudReporte,l=e.tipoReportePresion;if(t&&"2"===l){var s=0,d=0;return o.a.createElement("div",{id:"reportePresionPonderado"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReportePresionPonderado"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0Zona\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PRESION (MCA)\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEX. ACT.\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"PRODUCTO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CONT POND. ",o.a.createElement("br",null),"SECTOR \xa0"))),n.filter((function(e){return"%"===i?e.esSector:e.esSector&&e.codigoZona.toString()===i})).map((function(e){var t=0,n=0;return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:5,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),r.filter((function(e){return"%"===c?0!==x(e):x(e).toString()===c})).map((function(r){var i=x(r);return o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+r},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0",r),a.filter((function(t){return t.codigoZona===e.codigoZona&&t.tipoAltitud===i})).map((function(a){return t+=a.conexionesActivas,s+=a.conexionesActivas,n+=a.producto,d+=a.producto,o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+i},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.promedio.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.conexionesActivas),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},a.producto.toFixed(2)),o.a.createElement("td",{style:{borderRight:"1px solid black"}},"\xa0"))}))))})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(t||0).toFixed(0)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(n||0).toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t>0?(n/t).toFixed(2):0)))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:3,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO PONDERADO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},s.toFixed(0)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},d.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}})),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"PRESION PROMEDIO PONDERADO"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(d/s).toFixed(3))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"INDICE DE CUMPLIMIENTO INDIVIDUAL (ICI) PRESION MINIMA"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(d/s/10*100).toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"INDICE DE CUMPLIMIENTO INDIVIDUAL (ICI) PRESION MAXIMA"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},99.78.toFixed(2)))))))}return null};var ft=function(e){var t=e.mostrarReporte,a=e.promedioPresiones,n=e.zonas,r=e.zonaReporte,i=e.tipoReportePresion;if(t&&"3"===i){var c=0,l=0,s=0,d=0,u=0;return o.a.createElement("div",{id:"reportePresionServicio"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReportePresionServicio"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0AREA DE SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PRESION PSI\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PRESION MCA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0NUMERO DE",o.a.createElement("br",null),"CONEXIONES\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0PRODUCTO",o.a.createElement("br",null)," (PONDERADO)\xa0"))),n.filter((function(e){return"%"===r?e.esSector:e.esSector&&e.codigoZona.toString()===r})).map((function(e){var t=0,n=0;a.map((function(a){return e.codigoZona===a.codigoZona&&(t+=a.conexionesActivas,l+=a.conexionesActivas,n+=a.producto),null}));var r=n/t,i=(r=r===isNaN?0:r)/.7039;return i=i===isNaN?0:i,s+=r,d+=i,c+=n,u+=1,o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black"}}," ",e.denominacionZona," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",i.toFixed(2)," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",r.toFixed(2)," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",t," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," ",n.toFixed(2)," ")))})),function(e,t,a,n,r){var i=e/t,c=a/r,l=n/r;return o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO PONDERADO DE PRESI\xd3N"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},(i/.7039).toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},i.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},e.toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO ARITMETICO DE PRESI\xd3N"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},c.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},l.toFixed(2)),o.a.createElement("td",null,"\xa0"),o.a.createElement("td",null,"\xa0")),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PROMEDIO GENERAL DE PRESI\xd3N"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},((i/.7039+c)/2).toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},((i+l)/2).toFixed(2)),o.a.createElement("td",null,"\xa0"),o.a.createElement("td",null,"\xa0")))}(c,l,d,s,u))),o.a.createElement("br",null))}return null},vt=function(e){var t=e.mostrarReporte,a=e.tipoReportePresion,n=e.actividadPresiones,r=e.promedioPresiones,i=e.zonas,c=e.tiposAltitud,l=e.zonaReporte,s=e.altitudReporte;if(t&&"4"===a){console.log(r);var d=0,u=0,m=0;return o.a.createElement("div",{id:"reportePresionMinima"},o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{id:"tablaReportePresionMinima"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Zona"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Urbanizaci\xf3n - Calle"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"PRESION"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CANT"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones ",o.a.createElement("br",null),"Activas"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones ",o.a.createElement("br",null),"PRE - MIN"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Presion ",o.a.createElement("br",null),"Menor a 10"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"PRESx CONx"))),(i||[]).filter((function(e){return"%"===l?e.esSector:e.esSector&&e.codigoZona.toString()===l})).map((function(e){var t=(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona})).length,a=0,i=0,l=0;return t>0?o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:t+7,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),c.filter((function(e){return"%"===s?0!==x(e):x(e).toString()===s})).map((function(t){var c=0,s=0,p=0,g=0,b=x(t),E=(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===b})).length;return(r||[]).filter((function(t){return t.codigoZona===e.codigoZona&&t.tipoAltitud===b})).forEach((function(e){return a=e.conexionesActivas})),d+=a,E>0?o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+t},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:E+2,style:{border:"1px solid black",textAlign:"center"}},"\xa0",t)),(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===b})).forEach((function(e){l=e.promedioPresion<10?1:0,0!==(i=a/E*(s=l+s))&&(c+=1===l?e.promedioPresion:0),p=(c/s||0).toFixed(2),g+=e.promedioPresion})),(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===b})).map((function(t,n){return o.a.createElement("tr",{key:e.codigoZona+"-"+b+"-"+t.codigoPresion},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"left",paddingLeft:"8px"}},t.denominacionLote),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t.promedioPresion.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t.promedioPresion<10?1:0),n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",a," "):null,n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",i.toFixed(2)," "):null,n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",p," "):null,n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",(p*i).toFixed(2)," "):null)})),function(e,t){m+=e*t,u+=t}(p,i),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0",o.a.createElement("b",null,"PROMEDIO PARTE ",t.toUpperCase()),"\xa0"),o.a.createElement("td",{colSpan:6,style:{border:"1px solid black",textAlign:"center"}}," ",(g/E).toFixed(2)," "))):null}))):null})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"SUMATORIA"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},d),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},u.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},m.toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Presion Minima Promedio"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},(m/u).toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Porcentaje de poblaci\xf3n con Presi\xf3n menor a 10 mca"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},(u/d*100).toFixed(2)," %"))))))}return null},At=function(e){var t=e.mostrarReporte,a=e.tipoReportePresion,n=e.actividadPresiones,r=e.promedioPresiones,i=e.zonas,c=e.tiposAltitud,l=e.zonaReporte,s=e.altitudReporte,d=0,u=0,m=0;return t&&"6"===a?o.a.createElement("div",{id:"reportePresionMaxima"},o.a.createElement("div",{className:"centrado"},o.a.createElement("table",{id:"tablaReportePresionMaxima"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Zona"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Tipo de",o.a.createElement("br",null),"Altitud"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Urbanizaci\xf3n - Calle"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"PRESION"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"CANT"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones ",o.a.createElement("br",null),"Activas"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Conexiones ",o.a.createElement("br",null),"PRE - MAX"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"Presion ",o.a.createElement("br",null),"Mayor a 50"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"PRESx CONx"))),i.filter((function(e){return"%"===l?e.esSector:e.esSector&&e.codigoZona.toString()===l})).map((function(e){var t=(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona})).length,a=0,i=0,l=0;return t>0?o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:t+7,style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector))),c.filter((function(e){return"%"===s?0!==x(e):x(e).toString()===s})).map((function(t){var c=0,s=0,p=0,g=0,b=x(t),E=(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===b})).length;return(r||[]).filter((function(t){return t.codigoZona===e.codigoZona&&t.tipoAltitud===b})).forEach((function(e){return a=e.conexionesActivas})),d+=a,E>0?o.a.createElement(o.a.Fragment,{key:e.codigoZona+"-"+t},o.a.createElement("tr",null,o.a.createElement("td",{rowSpan:E+2,style:{border:"1px solid black",textAlign:"center"}},"\xa0",t)),(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===b})).forEach((function(e){l=e.promedioPresion>50?1:0,0!==(i=a/E*(s=l+s))&&(c+=1===l?e.promedioPresion:0),p=(c/s||0).toFixed(2),g+=e.promedioPresion})),(n||[]).filter((function(t){return t.codigoZonaReporte===e.codigoZona&&t.tipoAltitud===b})).map((function(t,n){return o.a.createElement("tr",{key:e.codigoZona+"-"+b+"-"+t.codigoPresion},o.a.createElement("td",{style:{border:"1px solid black",textAlign:"left",paddingLeft:"8px"}},t.denominacionLote),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t.promedioPresion.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},t.promedioPresion>50?1:0),n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",a," "):null,n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",i.toFixed(2)," "):null,n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",p," "):null,n<1?o.a.createElement("td",{rowSpan:E,style:{border:"1px solid black",textAlign:"center"}}," ",(p*i).toFixed(2)," "):null)})),function(e,t){m+=e*t,u+=t}(p,i),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0",o.a.createElement("b",null,"PROMEDIO PARTE ",t.toUpperCase()),"\xa0"),o.a.createElement("td",{colSpan:6,style:{border:"1px solid black",textAlign:"center"}}," ",(g/E).toFixed(2)," "))):null}))):null})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"SUMATORIA"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},d),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},u.toFixed(2)),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"\xa0"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},m.toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Presion Maxima Promedio"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},(m/u).toFixed(2))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2},"\xa0"),o.a.createElement("td",{colSpan:2,style:{border:"1px solid black",textAlign:"center"}},"Porcentaje de poblaci\xf3n con Presi\xf3n mayor a 50 mca"),o.a.createElement("td",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},(u/d*100).toFixed(2)," %")))))):null},xt=function(e){var t=e.mostrarReporte,a=e.tipoReportePresion,n=e.zonas,r=e.zonaReporte;return t&&"7"===a?o.a.createElement("div",{id:"ReporteResumenPresionMaxima"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteResumenPresionMaxima"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0PORCENTAJE DE LA POBLACION CON SERVICIO MAYOR A 50 mca DE PRESI\xd3N\xa0")),o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0AREA DE SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEXIONES ",o.a.createElement("br",null),"SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEXIONES CON SERVICIO",o.a.createElement("br",null),"MAYOR A 50mca\xa0"))),n.filter((function(e){return"%"===r?e.esSector:e.esSector&&e.codigoZona.toString()===r})).map((function(e){return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black"}}," ",e.denominacionZona," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 2,641 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 177 ")))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,rowSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PORCION DE POBLACION CON MAS DE 50 mca"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"86135"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"(%)")),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"7606"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"8.83%"))))),o.a.createElement("br",null)):null},St=function(e){var t=e.mostrarReporte,a=e.tipoReportePresion,n=e.zonas,r=e.zonaReporte;return t&&"5"===a?o.a.createElement("div",{id:"ReporteResumenPresionMinima"},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("table",{id:"tablaReporteResumenPresionMinima"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:5,style:{border:"1px solid black",textAlign:"center"}},"\xa0PORCENTAJE DE LA POBLACION CON SERVICIO MENOR A 10 mca DE PRESI\xd3N\xa0")),o.a.createElement("tr",null,o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0ZONA\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0AREA DE SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEXIONES ",o.a.createElement("br",null),"SERVICIO\xa0"),o.a.createElement("th",{style:{border:"1px solid black",textAlign:"center"}},"\xa0CONEXIONES CON SERVICIO",o.a.createElement("br",null),"MENOR A 10mca\xa0"))),n.filter((function(e){return"%"===r?e.esSector:e.esSector&&e.codigoZona.toString()===r})).map((function(e){return o.a.createElement("tbody",{key:e.codigoZona},o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)),o.a.createElement("td",{style:{border:"1px solid black"}}," ",e.denominacionZona," "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 2,641 "),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}}," 177 ")))})),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,rowSpan:2,style:{border:"1px solid black",textAlign:"center"}},"PORCION DE POBLACION CON MENOS DE 10 mca"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"86135"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"(%)")),o.a.createElement("tr",null,o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"1536"),o.a.createElement("td",{style:{border:"1px solid black",textAlign:"center"}},"1.78%"))))),o.a.createElement("br",null)):null},yt=parseInt((new Date).getMonth())+1,Ct=parseInt((new Date).getFullYear()),Rt={usuario:I(),actividadPresiones:[],promedioPresiones:[],zonas:[],zonaReporte:"%",urbanoReporte:"%",altitudReporte:"%",mesReporte:yt,agnoReporte:Ct,agnos:[2018,2019,2020,2021,2022,2023,2024,2025,2026],mesesAgno:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],tiposAltitud:["Alta","Media","Baja","Sin Especificar"],cantidadZonas:0,cantidadPuntosMedidos:0,cantidadPuntosRegistrados:0,tipoReportePresion:"1",tituloReportePresion:["REPORTE NO ENCONTRADO","ENCUESTA DE PRESIONES DEL SERVICIO POR ZONA DE ABASTECIMIENTO","PRESIONES PROMEDIO PONDERADO","PRESI\xd3N DE SERVICIO","PRESIONES MINIMA PROMEDIO","RESUMEN PRESI\xd3N MINIMA","PRESIONES MAXIMA PROMEDIO","RESUMEN PRESI\xd3N MAXIMA"],documento:{nombreArchivo:"",contenido:"",orientacion:"",idTabla:""},mostrarReporte:!1,mostrarDescargaArchivo:!1},Pt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listarZonas=function(){Ze().then((function(e){return a.setState({zonas:e})}))},a.mostrarReporte=function(){a.setState({mostrarReporte:!a.state.mostrarReporte})},a.mostrarDescargaArchivo=function(){a.generarInformacionDocumento(a.state.actividadPresiones),a.setState({mostrarDescargaArchivo:!a.state.mostrarDescargaArchivo})},a.cambiarMesReporte=function(e){a.setState({mesReporte:e.target.value,mostrarReporte:!1},(function(){return a.reportePresion()}))},a.cambiarAgnoReporte=function(e){a.setState({agnoReporte:e.target.value,mostrarReporte:!1},(function(){return a.reportePresion()}))},a.cambiarZonaReporte=function(e){a.setState({zonaReporte:e.target.value,mostrarReporte:!1},(function(){return a.reportePresion()}))},a.cambiarAltitudReporte=function(e){a.setState({altitudReporte:e.target.value,mostrarReporte:!1},(function(){return a.reportePresion()}))},a.cambiarTipoReporte=function(e){a.setState({tipoReportePresion:e.target.value,mostrarReporte:!1})},a.reportePresion=function(){var e,t={codigoZona:a.state.zonaReporte,codigoUrbano:a.state.urbanoReporte,tipoAltitud:a.state.altitudReporte,mesPeriodo:a.state.mesReporte,agnoPeriodo:a.state.agnoReporte};(e=t,new Promise((function(t,a){fetch(ut+"presion",{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-type":"application/json"})}).then((function(e){t(e.json())})).catch((function(e){a(e)}))}))).then((function(e){a.setState({actividadPresiones:e,cantidadPuntosRegistrados:e.length,cantidadPuntosMedidos:a.verificarRegistrosCompletos(e)}),e.length>0&&a.generarReporte(e)}))},a.generarReporte=function(e){var t=0,n=[],o=[];a.state.zonas.filter((function(e){return"%"===a.state.zonaReporte?e.esSector:e.esSector&&e.codigoZona.toString()===a.state.zonaReporte})).map((function(r){return t+=1,a.state.tiposAltitud.filter((function(e){return"%"===a.state.altitudReporte?0!==x(e):x(e).toString()===a.state.altitudReporte})).map((function(t){var i=x(t);return a.state.zonas.map((function(t){1===r.sector?t.sector===r.sector&&t.subSector===r.subSector&&a.insertarPromedioZonaAltitud(e,t.codigoZona,r.codigoZona,i).forEach((function(e){n.push(e)})):t.sector===r.sector&&a.insertarPromedioZonaAltitud(e,t.codigoZona,r.codigoZona,i).forEach((function(e){n.push(e)}));return 0})),function(e){return new Promise((function(t,a){fetch(_e+"/api/conexion/activas",{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json","Content-type":"application/json"})}).then((function(e){t(e.json())})).catch((function(e){a(e)}))}))}({codigoZona:r.codigoZona,tipoAltitud:i,mesPeriodo:a.state.mesReporte,agnoPeriodo:a.state.agnoReporte}).then((function(e){var t=a.insertarTotalConexionesActivas(n,r.codigoZona,i,e.conexionesActivas||0);o.push(t)})),0})),0})),a.setState({actividadPresiones:n,promedioPresiones:o,cantidadZonas:t})},a.insertarTotalConexionesActivas=function(e,t,a,n){var o=0,r=0;e.map((function(e){return e.codigoZonaReporte===t&&e.tipoAltitud===a&&(o+=e.promedioPresion,r+=1),0}));var i=o/r||0;return{promedio:i,conexionesActivas:n,producto:i*n,codigoZona:t,tipoAltitud:a}},a.insertarPromedioZonaAltitud=function(e,t,a,n){var o=[];return e.map((function(e){if(e.codigoZona===t&&e.tipoAltitud===n){var r=.703*e.lecturaAbajo+1;e.promedioPresion=r,e.codigoZonaReporte=a,o.push(e)}return 0})),o},a.verificarRegistrosCompletos=function(e){var t=0;return e.map((function(e){return"sin datos"===e.codigoPresion&&(t+=1),0})),e.length-t},a.generarInformacionDocumento=function(e){var t=a.state.documento;switch(a.state.tipoReportePresion){case"1":t.nombreArchivo="ReportePresionEncuesta",t.idTabla="tablaReportePresionEncuesta",t.contenido="Zona;Altitud;Urbanizaci\xf3n-Calle;Ma\xf1anasDe;Ma\xf1anasA;TardesDe;TardesA;Total;PromedioPonderado\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}));break;case"2":t.nombreArchivo="ReportePresionPonderado",t.idTabla="tablaReportePresionPonderado",t.contenido="Zona;Altitud;Prom;Hora;Minuto;Representa;Cont. Prom.;Conex. Act.;Producto;Cont Pond\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}));break;case"3":t.nombreArchivo="ReportePresionServicio",t.idTabla="tablaReportePresionServicio",t.contenido="Zona;Area De Servicio;Numero De Conexiones;Horas;Peso(1)Ponderado\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}));break;case"4":t.nombreArchivo="ReportePresionMinima",t.idTabla="tablaReportePresionMinima",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}));break;case"5":t.nombreArchivo="ReportePresionResumenPreMin",t.idTabla="tablaReportePresionResumenPreMin",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}));break;case"6":t.nombreArchivo="ReportePresionMaxima",t.idTabla="tablaReportePresionMaxima",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="landscape",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}));break;case"7":t.nombreArchivo="ReportePresionResumenPreMax",t.idTabla="tablaReportePresionResumenPreMax",t.contenido="CODIGO_ZONA;DENOMINACION_ZONA;VALORNUMERO\n",t.orientacion="portrait",e.map((function(e){return t.contenido=t.contenido+e.codigoPresion+";"+e.tipoAltitud+"\n"}))}a.setState({documento:t})},a.state=Rt,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.usuario.grupo>0&&(this.listarZonas(),this.reportePresion())}},{key:"render",value:function(){return this.state.usuario.grupo>0?o.a.createElement("div",{className:"contenedor"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"buscador_actividad_reporte"},o.a.createElement("div",{className:"centrado"},o.a.createElement("div",null,o.a.createElement("select",{className:"cuadro_dato",value:this.state.mesReporte,onChange:this.cambiarMesReporte},this.state.mesesAgno.map((function(e,t){return o.a.createElement("option",{key:t,value:t+1}," ",e," ")}))),"\xa0 \u2014 \xa0",o.a.createElement("select",{className:"cuadro_dato",value:this.state.agnoReporte,onChange:this.cambiarAgnoReporte},this.state.agnos.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)}))))),o.a.createElement("select",{hidden:!0,className:"cuadro_dato",onChange:this.cambiarZonaReporte},o.a.createElement("option",{value:"%"},"Zonas (TODO)"),this.state.zonas.filter((function(e){return e.esSector})).map((function(e){return o.a.createElement("option",{key:e.codigoZona,value:e.codigoZona},e.denominacionZona+"( Zona  "+h(e.sector)+(0===parseInt(e.subSector)?"":" \u2014 "+h(e.subSector))+("-"===e.microSector?"":" \u2014 "+e.microSector)+" )")}))),o.a.createElement("select",{hidden:!0,className:"cuadro_dato",onChange:this.cambiarAltitudReporte},o.a.createElement("option",{value:"%"},"Altitud (TODO)"),this.state.tiposAltitud.filter((function(e){return 0!==x(e)})).map((function(e){return o.a.createElement("option",{key:e,value:x(e)},e)}))),o.a.createElement("select",{className:"cuadro_dato",value:this.state.tipoReporteContinuidad,onChange:this.cambiarTipoReporte},o.a.createElement("option",{value:"1"},"Encuesta de Presiones del Servicio"),o.a.createElement("option",{value:"2"},"Presiones Promedio Ponderado"),o.a.createElement("option",{value:"3"},"Presi\xf3n de Servicio"),o.a.createElement("option",{value:"4"},"Presi\xf3n Minima"),o.a.createElement("option",{value:"5"},"Resumen Presi\xf3n Minima"),o.a.createElement("option",{value:"6"},"Presi\xf3n Maxima"),o.a.createElement("option",{value:"7"},"Resumen Presi\xf3n Maxima")))),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("div",{className:"cuadro_mensaje informacion"},o.a.createElement("div",null,o.a.createElement("b",null,"Resumen de Reporte")),o.a.createElement("hr",null),o.a.createElement("p",null,"Zonas: ",this.state.cantidadZonas),o.a.createElement("p",null,"Puntos Registrados: ",this.state.cantidadPuntosRegistrados),o.a.createElement("p",null,"Puntos Medidos: ",this.state.cantidadPuntosMedidos),o.a.createElement("div",{hidden:this.state.cantidadPuntosRegistrados<1,className:"dos_columnas"},o.a.createElement("button",{className:"boton boton_verde",onClick:this.mostrarReporte},"Generar",o.a.createElement("br",null),"Reporte"),o.a.createElement("button",{className:"boton "+(this.state.mostrarReporte?"boton_verde":"boton_rojo"),onClick:this.mostrarDescargaArchivo,disabled:!this.state.mostrarReporte},"Descargar",o.a.createElement("br",null),"Reporte")))),o.a.createElement("hr",null),o.a.createElement("h2",{style:{textAlign:"center"}},this.state.tituloReportePresion[this.state.tipoReportePresion],o.a.createElement("br",null),this.state.mesesAgno[this.state.mesReporte-1],", ",this.state.agnoReporte),o.a.createElement(Et,{mostrarReporte:this.state.mostrarReporte,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,actividadPresiones:this.state.actividadPresiones,tipoReportePresion:this.state.tipoReportePresion}),o.a.createElement(ht,{mostrarReporte:this.state.mostrarReporte,promedioPresiones:this.state.promedioPresiones,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,tipoReportePresion:this.state.tipoReportePresion}),o.a.createElement(ft,{mostrarReporte:this.state.mostrarReporte,promedioPresiones:this.state.promedioPresiones,zonas:this.state.zonas,zonaReporte:this.state.zonaReporte,tipoReportePresion:this.state.tipoReportePresion}),o.a.createElement(vt,{mostrarReporte:this.state.mostrarReporte,tipoReportePresion:this.state.tipoReportePresion,promedioPresiones:this.state.promedioPresiones,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,actividadPresiones:this.state.actividadPresiones}),o.a.createElement(St,{mostrarReporte:this.state.mostrarReporte,tipoReportePresion:this.state.tipoReportePresion,zonas:this.state.zonas,zonaReporte:this.state.zonaReporte}),o.a.createElement(At,{mostrarReporte:this.state.mostrarReporte,tipoReportePresion:this.state.tipoReportePresion,promedioPresiones:this.state.promedioPresiones,zonas:this.state.zonas,tiposAltitud:this.state.tiposAltitud,zonaReporte:this.state.zonaReporte,altitudReporte:this.state.altitudReporte,actividadPresiones:this.state.actividadPresiones}),o.a.createElement(xt,{mostrarReporte:this.state.mostrarReporte,tipoReportePresion:this.state.tipoReportePresion,zonas:this.state.zonas,zonaReporte:this.state.zonaReporte}),o.a.createElement(at,{titulo:"",mensaje:"Escoja el tipo de Documento que se Descargara",mostrarDescargaArchivo:this.state.mostrarDescargaArchivo,controlDescargaArchivo:this.mostrarDescargaArchivo,documento:this.state.documento,tipoReporte:this.state.tipoReportePresion})):o.a.createElement(U,null)}}]),t}(n.Component),Ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).identificarModulo=function(){var e=window.location.href.substring("http://18.191.29.185:5000".length);e=e.split("/app")[1],R.forEach((function(t){t.url==="/app"+e&&a.setState({moduloAtivo:t})}))},a.state={moduloAtivo:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.identificarModulo()}},{key:"render",value:function(){return o.a.createElement("div",{className:"navegador"},o.a.createElement("div",{className:"navegador_titulo"},o.a.createElement("b",null,this.state.moduloAtivo.titulo)))}}]),t}(n.Component),Nt=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"ERROR 404"),o.a.createElement("h4",null," No existe Pagina "))}}]),t}(n.Component),Mt=function(e){return o.a.createElement("div",{className:"icono_usuario"},o.a.createElement("svg",Object.assign({viewBox:"-42 0 512 512.002"},e),o.a.createElement("path",{d:"m210.351562 246.632812c33.882813 0 63.222657-12.152343 87.195313-36.128906 23.972656-23.972656 36.125-53.304687 36.125-87.191406 0-33.875-12.152344-63.210938-36.128906-87.191406-23.976563-23.96875-53.3125-36.121094-87.191407-36.121094-33.886718 0-63.21875 12.152344-87.191406 36.125s-36.128906 53.308594-36.128906 87.1875c0 33.886719 12.15625 63.222656 36.132812 87.195312 23.976563 23.96875 53.3125 36.125 87.1875 36.125zm0 0"}),o.a.createElement("path",{d:"m426.128906 393.703125c-.691406-9.976563-2.089844-20.859375-4.148437-32.351563-2.078125-11.578124-4.753907-22.523437-7.957031-32.527343-3.308594-10.339844-7.808594-20.550781-13.371094-30.335938-5.773438-10.15625-12.554688-19-20.164063-26.277343-7.957031-7.613282-17.699219-13.734376-28.964843-18.199219-11.226563-4.441407-23.667969-6.691407-36.976563-6.691407-5.226563 0-10.28125 2.144532-20.042969 8.5-6.007812 3.917969-13.035156 8.449219-20.878906 13.460938-6.707031 4.273438-15.792969 8.277344-27.015625 11.902344-10.949219 3.542968-22.066406 5.339844-33.039063 5.339844-10.972656 0-22.085937-1.796876-33.046874-5.339844-11.210938-3.621094-20.296876-7.625-26.996094-11.898438-7.769532-4.964844-14.800782-9.496094-20.898438-13.46875-9.75-6.355468-14.808594-8.5-20.035156-8.5-13.3125 0-25.75 2.253906-36.972656 6.699219-11.257813 4.457031-21.003906 10.578125-28.96875 18.199219-7.605469 7.28125-14.390625 16.121094-20.15625 26.273437-5.558594 9.785157-10.058594 19.992188-13.371094 30.339844-3.199219 10.003906-5.875 20.945313-7.953125 32.523437-2.058594 11.476563-3.457031 22.363282-4.148437 32.363282-.679688 9.796875-1.023438 19.964844-1.023438 30.234375 0 26.726562 8.496094 48.363281 25.25 64.320312 16.546875 15.746094 38.441406 23.734375 65.066406 23.734375h246.53125c26.625 0 48.511719-7.984375 65.0625-23.734375 16.757813-15.945312 25.253906-37.585937 25.253906-64.324219-.003906-10.316406-.351562-20.492187-1.035156-30.242187zm0 0"})))},kt=function(e){return o.a.createElement("div",{style:{cursor:"pointer"}},o.a.createElement("div",{className:"centrado"},o.a.createElement("svg",Object.assign({className:"icono_sesion",viewBox:"0 -96 512 512"},e),o.a.createElement("path",{d:"m456.835938 0h-401.667969c-30.421875 0-55.167969 24.746094-55.167969 55.164062v208.867188c0 30.421875 24.746094 55.167969 55.167969 55.167969h401.667969c30.417968 0 55.164062-24.746094 55.164062-55.164063v-208.871094c0-30.417968-24.746094-55.164062-55.164062-55.164062zm25.164062 264.035156c0 13.875-11.289062 25.164063-25.164062 25.164063h-401.667969c-13.878907 0-25.167969-11.289063-25.167969-25.164063v-208.871094c0-13.875 11.289062-25.164062 25.167969-25.164062h401.667969c13.875 0 25.164062 11.289062 25.164062 25.164062zm0 0"}),o.a.createElement("path",{d:"m202.339844 52.59375c-4.289063-4.292969-10.742188-5.574219-16.347656-3.253906-5.605469 2.324218-9.257813 7.792968-9.257813 13.859375v17.136719h-113.535156c-8.285157 0-15 6.714843-15 15v128.53125c0 8.285156 6.714843 15 15 15h113.535156v17.132812c0 6.066406 3.652344 11.535156 9.257813 13.859375 1.855468.769531 3.804687 1.140625 5.738281 1.140625 3.902343 0 7.738281-1.523438 10.609375-4.394531l96.398437-96.398438c5.859375-5.859375 5.859375-15.355469 0-21.214843zm3.949218 167.636719c-1.625-6.527344-7.523437-11.363281-14.554687-11.363281h-113.535156v-98.53125h113.535156c7.03125 0 12.929687-4.839844 14.554687-11.367188l60.632813 60.632812zm0 0"}),o.a.createElement("path",{d:"m448.800781 48.199219h-112.464843c-8.285157 0-15 6.714843-15 15v192.800781c0 8.285156 6.714843 15 15 15h112.464843c8.285157 0 15-6.714844 15-15v-192.800781c0-8.285157-6.714843-15-15-15zm-15 192.800781h-82.464843v-162.800781h82.464843zm0 0"}))),o.a.createElement("div",{style:{color:"white"},className:"centrado"},o.a.createElement("b",null,e.conectado?"Salir":"Ingresar")))},It=function(e){var t=e.grupoUsuario;return e.mostrar?0===t?o.a.createElement("ul",{className:"menu_desplegable abrir"},o.a.createElement("a",{href:"/app/actividad/operario"},o.a.createElement("div",null,"Actividades",o.a.createElement("br",null)," Operario")),o.a.createElement("a",{href:"/app/cambiocontra"},o.a.createElement("div",null,"Cambiar",o.a.createElement("br",null),"Contrase\xf1a")),o.a.createElement("a",{href:"/app/salir"},o.a.createElement("div",null,"Salir"))):t?t>0?o.a.createElement("ul",{className:"menu_desplegable abrir"},o.a.createElement("a",{href:"/app/zona"},o.a.createElement("div",null,"Zonas Comerciales")),o.a.createElement("a",{href:"/app/bloque"},o.a.createElement("div",null,"Bloques Urbanos")),o.a.createElement("a",{href:"/app/direccion"},o.a.createElement("div",null,"Direcciones Activas")),o.a.createElement("a",{href:"/app/usuario"},o.a.createElement("div",null,"Usuarios Sistema")),o.a.createElement("a",{href:"/app/aguafuente"},o.a.createElement("div",null,"Fuentes de Agua")),o.a.createElement("a",{href:"/app/zonafuente"},o.a.createElement("div",null,"Fuentes Zona")),o.a.createElement("a",{href:"/app/conexion"},o.a.createElement("div",null,"Conexiones Activas")),o.a.createElement("a",{href:"/app/conexion/prodagua"},o.a.createElement("div",null,"Conexiones Agua")),o.a.createElement("a",{href:"/app/actividad"},o.a.createElement("div",null,"Actividades y Reporte")),o.a.createElement("a",{href:"/app/cambiocontra"},o.a.createElement("div",null,"Cambiar Contrase\xf1a"))):null:o.a.createElement("ul",{className:"menu_desplegable abrir"},o.a.createElement("a",{href:"/app/ingresar"},o.a.createElement("div",null,"Ingresar"))):null},Dt=function(e){return o.a.createElement("header",{className:"barra_herramientas"},o.a.createElement("nav",{className:"barra_herramientas_navegador"},o.a.createElement("div",{className:"barra_herramientas_boton_logo"},o.a.createElement("div",null,o.a.createElement(It,{grupoUsuario:e.usuario.grupo,mostrar:e.mostrar}),o.a.createElement("div",{className:"barra_herramientas_boton",onClick:e.controlMenuLateral},o.a.createElement("div",{className:"barra_herramientas_boton_linea"}),o.a.createElement("div",{className:"barra_herramientas_boton_linea"}),o.a.createElement("div",{className:"barra_herramientas_boton_linea"}))),o.a.createElement("a",{href:"/app"},o.a.createElement("img",{className:"barra_herramientas_logo",src:"/img/Logo-Seda-Cusco.png",alt:"MEMBRETE SEDACUSCO",title:"MEMBRETE SEDACUSCO"}))),o.a.createElement("div",null),o.a.createElement("div",{className:"barra_herramientas_sesion"},e.usuario?o.a.createElement("a",{href:"/app/perfil",className:"barra_herramientas_navegador_usuario",title:E(e.usuario.grupo)},o.a.createElement("div",null,o.a.createElement(Mt,{fill:"#28a745"})),o.a.createElement("div",{className:"usuario_nombre"},e.usuario.nombres.substring(0,20)),o.a.createElement("div",{className:"usuario_apellido"},e.usuario.apellidosPaterno)):o.a.createElement("div",null),o.a.createElement("a",{href:e.usuario?"/app/salir":"/app/ingresar",style:{textDecoration:"none"}},o.a.createElement(kt,{conectado:e.usuario?1:0,fill:"white"})))),e.mostrar?o.a.createElement("div",{className:"fondo_claro",onClick:e.controlFondoMenu}):null)},jt={estadoConectado:localStorage.getItem("estadoConectado")||"red",mostrarMenuLateral:!1,usuario:I()},Zt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).actualizarUsuario=function(e){e="http://18.191.29.185:5000"+e,a.setState({usuario:I()},(function(){return window.location=e}))},a.actualizarEstado=function(){new Promise((function(e,t){fetch(D).then((function(t){return e(t.json())})).catch((function(t){return e({error:t.message})}))})).then((function(e){e.error?(localStorage.setItem("estadoConectado","red"),a.setState({estadoConectado:"red"})):new Promise((function(e,t){fetch(D+"repositorio/").then((function(t){return e(t.json())})).catch((function(t){return e({error:t.message})}))})).then((function(e){e.error?(localStorage.setItem("estadoConectado","orange"),a.setState({estadoConectado:"orange"})):(localStorage.setItem("estadoConectado","green"),a.setState({estadoConectado:"green"}))}))}))},a.controlMenuLateral=function(){a.setState({mostrarMenuLateral:!a.state.mostrarMenuLateral})},a.controlFondoMenu=function(){a.setState({mostrarMenuLateral:!1})},a.state=jt,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0!==this.state.usuario.grupo&&"red"!==this.state.estadoConectado||this.actualizarEstado()}},{key:"render",value:function(){var e=this,t=this.state.estadoConectado;return o.a.createElement("div",{className:"App",style:{height:"100%"}},o.a.createElement(Dt,{controlMenuLateral:this.controlMenuLateral,mostrar:this.state.mostrarMenuLateral,estadoConectado:t,controlFondoMenu:this.controlFondoMenu,cerrarSesion:this.cerrarSesion,usuario:this.state.usuario}),o.a.createElement("main",{style:{marginTop:"56px"}},o.a.createElement(Ot,{usuario:this.state.usuario}),o.a.createElement(m.a,null,o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/app",component:Z}),o.a.createElement(p.a,{path:"/app/perfil",component:_}),o.a.createElement(p.a,{path:"/app/ingresar",render:function(t){return o.a.createElement(Q,Object.assign({actualizarUsuario:e.actualizarUsuario},t))}}),o.a.createElement(p.a,{path:"/app/salir",render:function(t){return o.a.createElement($,Object.assign({actualizarUsuario:e.actualizarUsuario},t))}}),o.a.createElement(p.a,{path:"/app/usuario",component:G}),o.a.createElement(p.a,{path:"/app/cambiocontra",component:te}),o.a.createElement(p.a,{path:"/app/actividad/administrador/continuidad",render:function(e){return o.a.createElement(Ce,Object.assign({tipoActividad:0},e))}}),o.a.createElement(p.a,{path:"/app/actividad/administrador/presion",render:function(e){return o.a.createElement(Ce,Object.assign({tipoActividad:1},e))}}),o.a.createElement(p.a,{path:"/app/actividad/operario",component:De}),o.a.createElement(p.a,{path:"/app/actividad",component:ne}),o.a.createElement(p.a,{path:"/app/bloque",component:ze}),o.a.createElement(p.a,{path:"/app/conexion/prodagua",component:Be}),o.a.createElement(p.a,{path:"/app/conexion",component:Fe}),o.a.createElement(p.a,{path:"/app/direccion",component:Le}),o.a.createElement(p.a,{path:"/app/aguafuente",component:Xe}),o.a.createElement(p.a,{path:"/app/zonafuente",component:We}),o.a.createElement(p.a,{path:"/app/zona",component:Ke}),o.a.createElement(p.a,{path:"/app/mapa",component:Qe}),o.a.createElement(p.a,{path:"/app/reporte/continuidad",component:bt}),o.a.createElement(p.a,{path:"/app/reporte/presion",component:Pt}),o.a.createElement(p.a,{path:"/app/*",component:Nt})))))}}]),t}(n.Component);a(40);i.a.render(o.a.createElement(Zt,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.a7e3003a.chunk.js.map